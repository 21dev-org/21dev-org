---
interface Props {
  class?: string;
}

const { class: className = '' } = Astro.props;

// Generate random but deterministic nodes
const nodes = [
  { cx: 20, cy: 30, r: 3 },
  { cx: 80, cy: 20, r: 4 },
  { cx: 50, cy: 50, r: 5 },
  { cx: 15, cy: 70, r: 3 },
  { cx: 85, cy: 75, r: 4 },
  { cx: 35, cy: 15, r: 3 },
  { cx: 65, cy: 85, r: 3 },
  { cx: 90, cy: 45, r: 3 },
  { cx: 10, cy: 50, r: 3 },
  { cx: 45, cy: 80, r: 4 },
  { cx: 70, cy: 35, r: 3 },
  { cx: 25, cy: 90, r: 3 },
];

// Generate connections
const connections = [
  [0, 2],
  [1, 2],
  [2, 3],
  [2, 4],
  [0, 5],
  [1, 10],
  [3, 8],
  [4, 7],
  [5, 10],
  [6, 9],
  [7, 10],
  [8, 0],
  [9, 3],
  [10, 4],
  [11, 3],
  [11, 9],
  [6, 4],
  [5, 2],
];
---

<svg
  class={className}
  viewBox="0 0 100 100"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
  aria-hidden="true"
>
  <defs>
    <linearGradient id="node-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F7931A;stop-opacity:0.8"></stop>
      <stop offset="100%" style="stop-color:#EA580C;stop-opacity:0.6"></stop>
    </linearGradient>
    <filter id="glow">
      <feGaussianBlur stdDeviation="1" result="coloredBlur"></feGaussianBlur>
      <feMerge>
        <feMergeNode in="coloredBlur"></feMergeNode>
        <feMergeNode in="SourceGraphic"></feMergeNode>
      </feMerge>
    </filter>
  </defs>

  <!-- Connection lines -->
  <g class="connections" stroke="url(#node-gradient)" stroke-width="0.5" stroke-opacity="0.3">
    {
      connections.map(([from, to]) => (
        <line
          x1={nodes[from].cx}
          y1={nodes[from].cy}
          x2={nodes[to].cx}
          y2={nodes[to].cy}
          class="connection-line"
        />
      ))
    }
  </g>

  <!-- Nodes -->
  <g class="nodes" filter="url(#glow)">
    {
      nodes.map((node, i) => (
        <circle
          cx={node.cx}
          cy={node.cy}
          r={node.r}
          fill="url(#node-gradient)"
          class="node"
          style={`animation-delay: ${i * 0.2}s`}
        />
      ))
    }
  </g>

  <!-- Central highlight node -->
  <circle cx="50" cy="50" r="6" fill="#F7931A" filter="url(#glow)" class="central-node"></circle>
</svg>

<style>
  .node {
    animation: pulse 3s ease-in-out infinite;
  }

  .central-node {
    animation: pulse 2s ease-in-out infinite;
  }

  .connection-line {
    animation: fade 4s ease-in-out infinite;
  }

  @keyframes pulse {
    0%,
    100% {
      opacity: 0.6;
      transform-origin: center;
    }
    50% {
      opacity: 1;
    }
  }

  @keyframes fade {
    0%,
    100% {
      stroke-opacity: 0.2;
    }
    50% {
      stroke-opacity: 0.5;
    }
  }
</style>
