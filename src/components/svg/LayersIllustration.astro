---
interface Props {
  class?: string;
}

const { class: className = '' } = Astro.props;
---

<svg
  class={className}
  viewBox="0 0 160 120"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
  aria-label="Bitcoin Layers"
>
  <defs>
    <linearGradient id="layer1-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F7931A" />
      <stop offset="100%" style="stop-color:#EA580C" />
    </linearGradient>
    <linearGradient id="layer2-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#FBBF24" />
      <stop offset="100%" style="stop-color:#F59E0B" />
    </linearGradient>
    <linearGradient id="layer3-gradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#A855F7" />
      <stop offset="100%" style="stop-color:#7C3AED" />
    </linearGradient>
    <filter id="layer-shadow">
      <feDropShadow dx="0" dy="2" stdDeviation="2" flood-opacity="0.15" />
    </filter>
  </defs>

  <!-- Layer 1: Bitcoin Base Layer -->
  <g class="layer layer-1" filter="url(#layer-shadow)">
    <path
      d="M20 85 L80 100 L140 85 L140 70 L80 85 L20 70 Z"
      fill="url(#layer1-gradient)"
    />
    <path
      d="M20 70 L80 85 L140 70 L80 55 Z"
      fill="url(#layer1-gradient)"
      opacity="0.9"
    />
    <!-- Bitcoin symbol -->
    <text x="80" y="78" text-anchor="middle" fill="white" font-size="10" font-weight="bold">₿</text>
  </g>

  <!-- Layer 2: Lightning Network -->
  <g class="layer layer-2" filter="url(#layer-shadow)">
    <path
      d="M30 55 L80 67 L130 55 L130 42 L80 54 L30 42 Z"
      fill="url(#layer2-gradient)"
    />
    <path
      d="M30 42 L80 54 L130 42 L80 30 Z"
      fill="url(#layer2-gradient)"
      opacity="0.9"
    />
    <!-- Lightning symbol -->
    <text x="80" y="48" text-anchor="middle" fill="white" font-size="10">⚡</text>
  </g>

  <!-- Layer 3: Applications -->
  <g class="layer layer-3" filter="url(#layer-shadow)">
    <path
      d="M40 28 L80 38 L120 28 L120 18 L80 28 L40 18 Z"
      fill="url(#layer3-gradient)"
    />
    <path
      d="M40 18 L80 28 L120 18 L80 8 Z"
      fill="url(#layer3-gradient)"
      opacity="0.9"
    />
    <!-- App symbol -->
    <text x="80" y="22" text-anchor="middle" fill="white" font-size="6">Apps</text>
  </g>

  <!-- Labels -->
  <g fill="currentColor" font-size="6" opacity="0.7">
    <text x="145" y="78">Layer 1</text>
    <text x="145" y="86" font-size="5" opacity="0.5">Bitcoin</text>

    <text x="135" y="48">Layer 2</text>
    <text x="135" y="56" font-size="5" opacity="0.5">Lightning</text>

    <text x="125" y="22">Layer 3</text>
    <text x="125" y="30" font-size="5" opacity="0.5">應用層</text>
  </g>

  <!-- Connection dots -->
  <g class="connections">
    <circle cx="80" cy="55" r="2" fill="#F7931A" class="dot dot-1" />
    <circle cx="70" cy="56" r="1.5" fill="#F7931A" class="dot dot-2" opacity="0.7" />
    <circle cx="90" cy="56" r="1.5" fill="#F7931A" class="dot dot-3" opacity="0.7" />

    <circle cx="80" cy="28" r="2" fill="#FBBF24" class="dot dot-4" />
    <circle cx="72" cy="29" r="1.5" fill="#FBBF24" class="dot dot-5" opacity="0.7" />
    <circle cx="88" cy="29" r="1.5" fill="#FBBF24" class="dot dot-6" opacity="0.7" />
  </g>
</svg>

<style>
  .layer {
    animation: layer-rise 0.5s ease-out backwards;
  }

  .layer-1 { animation-delay: 0s; }
  .layer-2 { animation-delay: 0.2s; }
  .layer-3 { animation-delay: 0.4s; }

  .dot {
    animation: dot-pulse 2s ease-in-out infinite;
  }

  .dot-1, .dot-4 { animation-delay: 0s; }
  .dot-2, .dot-5 { animation-delay: 0.3s; }
  .dot-3, .dot-6 { animation-delay: 0.6s; }

  @keyframes layer-rise {
    from {
      opacity: 0;
      transform: translateY(10px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  @keyframes dot-pulse {
    0%, 100% {
      opacity: 0.5;
      transform: scale(1);
    }
    50% {
      opacity: 1;
      transform: scale(1.2);
    }
  }
</style>
