---
interface Props {
  class?: string;
}

const { class: className = '' } = Astro.props;
---

<svg
  class={className}
  viewBox="0 0 200 120"
  fill="none"
  xmlns="http://www.w3.org/2000/svg"
  aria-label="Bitcoin Node"
>
  <defs>
    <linearGradient id="node-body" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" style="stop-color:#F7931A"></stop>
      <stop offset="100%" style="stop-color:#EA580C"></stop>
    </linearGradient>
    <linearGradient id="block-sync" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:#22C55E"></stop>
      <stop offset="100%" style="stop-color:#16A34A"></stop>
    </linearGradient>
    <filter id="node-glow">
      <feDropShadow dx="0" dy="2" stdDeviation="3" flood-color="#F7931A" flood-opacity="0.3"
      ></feDropShadow>
    </filter>
  </defs>

  <!-- Central Node (Your Node) -->
  <g class="main-node" filter="url(#node-glow)">
    <!-- Server body -->
    <rect x="70" y="30" width="60" height="50" rx="4" fill="url(#node-body)"></rect>

    <!-- Screen/display -->
    <rect x="75" y="35" width="50" height="25" rx="2" fill="#1C1917"></rect>

    <!-- Terminal content -->
    <text x="80" y="44" fill="#22C55E" font-size="4" font-family="monospace">$ bitcoind</text>
    <text x="80" y="50" fill="#A8A29E" font-size="3.5" font-family="monospace">blocks: 824,591</text
    >
    <text x="80" y="55" fill="#A8A29E" font-size="3.5" font-family="monospace">peers: 125</text>

    <!-- LED indicators -->
    <circle cx="80" cy="72" r="2" fill="#22C55E" class="led-blink"></circle>
    <circle cx="88" cy="72" r="2" fill="#22C55E" class="led-blink" style="animation-delay: 0.2s"
    ></circle>
    <circle cx="96" cy="72" r="2" fill="#FBBF24" class="led-blink" style="animation-delay: 0.4s"
    ></circle>

    <!-- Ventilation lines -->
    <g stroke="white" stroke-width="0.5" opacity="0.3">
      <line x1="105" y1="68" x2="120" y2="68"></line>
      <line x1="105" y1="71" x2="120" y2="71"></line>
      <line x1="105" y1="74" x2="120" y2="74"></line>
    </g>
  </g>

  <!-- Your Node Label -->
  <text
    x="100"
    y="92"
    text-anchor="middle"
    fill="currentColor"
    font-size="5"
    font-weight="bold"
    opacity="0.8">你的節點</text
  >

  <!-- Peer nodes -->
  <g class="peer-nodes">
    <!-- Peer 1 (top left) -->
    <g class="peer peer-1">
      <circle cx="30" cy="35" r="12" fill="#78716C" opacity="0.3"></circle>
      <circle cx="30" cy="35" r="8" fill="#57534E"></circle>
      <text x="30" y="38" text-anchor="middle" fill="white" font-size="6">₿</text>
      <line
        x1="42"
        y1="40"
        x2="65"
        y2="48"
        stroke="#F7931A"
        stroke-width="1"
        opacity="0.5"
        class="connection"></line>
    </g>

    <!-- Peer 2 (top right) -->
    <g class="peer peer-2">
      <circle cx="170" cy="35" r="12" fill="#78716C" opacity="0.3"></circle>
      <circle cx="170" cy="35" r="8" fill="#57534E"></circle>
      <text x="170" y="38" text-anchor="middle" fill="white" font-size="6">₿</text>
      <line
        x1="158"
        y1="40"
        x2="135"
        y2="48"
        stroke="#F7931A"
        stroke-width="1"
        opacity="0.5"
        class="connection"></line>
    </g>

    <!-- Peer 3 (left) -->
    <g class="peer peer-3">
      <circle cx="20" cy="70" r="12" fill="#78716C" opacity="0.3"></circle>
      <circle cx="20" cy="70" r="8" fill="#57534E"></circle>
      <text x="20" y="73" text-anchor="middle" fill="white" font-size="6">₿</text>
      <line
        x1="32"
        y1="68"
        x2="65"
        y2="58"
        stroke="#F7931A"
        stroke-width="1"
        opacity="0.5"
        class="connection"></line>
    </g>

    <!-- Peer 4 (right) -->
    <g class="peer peer-4">
      <circle cx="180" cy="70" r="12" fill="#78716C" opacity="0.3"></circle>
      <circle cx="180" cy="70" r="8" fill="#57534E"></circle>
      <text x="180" y="73" text-anchor="middle" fill="white" font-size="6">₿</text>
      <line
        x1="168"
        y1="68"
        x2="135"
        y2="58"
        stroke="#F7931A"
        stroke-width="1"
        opacity="0.5"
        class="connection"></line>
    </g>

    <!-- Peer 5 (bottom) -->
    <g class="peer peer-5">
      <circle cx="100" cy="115" r="10" fill="#78716C" opacity="0.3"></circle>
      <circle cx="100" cy="115" r="6" fill="#57534E"></circle>
      <text x="100" y="118" text-anchor="middle" fill="white" font-size="5">₿</text>
      <line
        x1="100"
        y1="105"
        x2="100"
        y2="85"
        stroke="#F7931A"
        stroke-width="1"
        opacity="0.5"
        class="connection"></line>
    </g>
  </g>

  <!-- Sync progress bar -->
  <g class="sync-bar">
    <rect x="60" y="5" width="80" height="8" rx="4" fill="#E7E5E4"></rect>
    <rect x="60" y="5" width="76" height="8" rx="4" fill="url(#block-sync)" class="progress-fill"
    ></rect>
    <text x="100" y="11" text-anchor="middle" fill="white" font-size="4" font-weight="bold"
      >99.9%</text
    >
  </g>
  <text x="100" y="20" text-anchor="middle" fill="currentColor" font-size="4" opacity="0.6"
    >區塊同步</text
  >

  <!-- Data flow indicators -->
  <g class="data-flow">
    <circle cx="55" cy="50" r="2" fill="#F7931A" class="data-dot dot-1"></circle>
    <circle cx="145" cy="50" r="2" fill="#F7931A" class="data-dot dot-2"></circle>
  </g>
</svg>

<style>
  .main-node {
    animation: node-appear 0.6s ease-out backwards;
  }

  .peer {
    animation: peer-appear 0.4s ease-out backwards;
  }

  .peer-1 {
    animation-delay: 0.3s;
  }
  .peer-2 {
    animation-delay: 0.4s;
  }
  .peer-3 {
    animation-delay: 0.5s;
  }
  .peer-4 {
    animation-delay: 0.6s;
  }
  .peer-5 {
    animation-delay: 0.7s;
  }

  .connection {
    animation: connection-pulse 2s ease-in-out infinite;
  }

  .led-blink {
    animation: led-blink 1s ease-in-out infinite;
  }

  .data-dot {
    animation: data-flow 1.5s ease-in-out infinite;
  }

  .dot-1 {
    animation-delay: 0s;
  }
  .dot-2 {
    animation-delay: 0.75s;
  }

  .progress-fill {
    animation: progress-grow 2s ease-out forwards;
  }

  @keyframes node-appear {
    from {
      opacity: 0;
      transform: scale(0.9);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes peer-appear {
    from {
      opacity: 0;
      transform: scale(0.5);
    }
    to {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes connection-pulse {
    0%,
    100% {
      opacity: 0.3;
    }
    50% {
      opacity: 0.8;
    }
  }

  @keyframes led-blink {
    0%,
    100% {
      opacity: 1;
    }
    50% {
      opacity: 0.3;
    }
  }

  @keyframes data-flow {
    0%,
    100% {
      opacity: 0;
      transform: scale(0.5);
    }
    50% {
      opacity: 1;
      transform: scale(1);
    }
  }

  @keyframes progress-grow {
    from {
      width: 0;
    }
    to {
      width: 76px;
    }
  }
</style>
