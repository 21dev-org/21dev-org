---
import GitHubIcon from '@/components/svg/GitHubIcon.astro';
import { navigation, simpleNavItems, secondaryNav } from '@/data/navigation';
---

<div
  id="mobile-nav"
  class="hidden lg:hidden border-t border-[var(--border-default)] bg-[var(--bg-primary)]"
>
  <nav class="container-wide py-4" aria-label="手機導航">
    <ul class="space-y-1">
      {
        navigation.map((item) => (
          <li>
            <details class="group">
              <summary class="flex items-center justify-between px-3 py-2 text-base font-medium text-[var(--text-primary)] rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800 cursor-pointer list-none">
                {item.label}
                <svg
                  class="h-5 w-5 text-[var(--text-tertiary)] transition-transform group-open:rotate-180"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                </svg>
              </summary>
              <div class="mt-1 ml-4 space-y-1">
                {item.sections.map((section) => (
                  <div class="py-2">
                    <p class="px-3 text-xs font-semibold uppercase tracking-wider text-[var(--text-tertiary)] mb-2">
                      {section.title}
                    </p>
                    <ul class="space-y-1">
                      {section.links.map((link) => (
                        <li>
                          <a
                            href={link.href}
                            class="block px-3 py-2.5 text-sm text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md transition-colors min-h-[40px] flex items-center"
                          >
                            {link.label}
                          </a>
                        </li>
                      ))}
                    </ul>
                  </div>
                ))}
                <a
                  href={item.href}
                  class="block px-3 py-2 text-sm font-medium text-bitcoin-500 hover:text-bitcoin-600"
                >
                  查看全部 →
                </a>
              </div>
            </details>
          </li>
        ))
      }

      {
        simpleNavItems.map((item) => (
          <li>
            <a
              href={item.href}
              class="block px-3 py-2 text-base font-medium text-[var(--text-primary)] rounded-lg hover:bg-neutral-100 dark:hover:bg-neutral-800"
            >
              {item.label}
            </a>
          </li>
        ))
      }

      <li class="pt-4 border-t border-[var(--border-default)] mt-4">
        <div class="flex flex-wrap gap-2 px-3">
          {
            secondaryNav.map((item) => (
              <a
                href={item.href}
                class="px-3 py-2 text-sm text-[var(--text-secondary)] hover:text-[var(--text-primary)] hover:bg-neutral-100 dark:hover:bg-neutral-800 rounded-md min-h-[40px] flex items-center"
              >
                {item.label}
              </a>
            ))
          }
        </div>
      </li>

      <li class="pt-4">
        <a
          href="https://github.com/21dev-org"
          target="_blank"
          rel="noopener noreferrer"
          class="flex items-center gap-2 px-3 py-2 text-sm text-[var(--text-secondary)] hover:text-[var(--text-primary)]"
        >
          <GitHubIcon size={20} />
          GitHub
        </a>
      </li>
    </ul>
  </nav>
</div>
