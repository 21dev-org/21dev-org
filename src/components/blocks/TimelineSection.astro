---
import Button from '@/components/ui/Button.astro';
import { bitcoinMilestones, getTimelineStats } from '@/data/bitcoin-timeline';

// 顯示最重要的 3 個里程碑
const featuredMilestones = bitcoinMilestones
  .filter((m) => m.significance === 'critical')
  .slice(-3)
  .reverse();

const stats = getTimelineStats();
---

<section class="py-16 md:py-20 bg-[var(--bg-secondary)]">
  <div class="container-wide">
    <div class="max-w-4xl mx-auto">
      <!-- Section header -->
      <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-6 mb-8">
        <div>
          <h2 class="text-2xl md:text-3xl font-bold text-[var(--text-primary)] mb-2">
            比特幣大事記
          </h2>
          <p class="text-[var(--text-secondary)]">
            {stats.totalMilestones} 個歷史事件，{stats.firstYear} - {stats.lastYear}
          </p>
        </div>
        <Button href="/timeline/" variant="secondary">
          完整時間軸
          <svg
            class="h-4 w-4"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6"
            ></path>
          </svg>
        </Button>
      </div>

      <!-- Featured milestones -->
      <div class="space-y-4">
        {
          featuredMilestones.map((milestone) => (
            <a
              href="/timeline/"
              class="group flex gap-4 p-4 rounded-xl bg-[var(--surface-elevated)] border border-[var(--border-default)] hover:border-bitcoin-500/50 transition-all"
            >
              <div class="flex-shrink-0 w-16 text-center">
                <div class="text-2xl font-bold text-bitcoin-500">{milestone.date.slice(0, 4)}</div>
                <div class="text-xs text-[var(--text-tertiary)]">{milestone.date.slice(5)}</div>
              </div>
              <div class="flex-1 min-w-0">
                <h3 class="font-semibold text-[var(--text-primary)] group-hover:text-bitcoin-500 transition-colors">
                  {milestone.title}
                </h3>
                <p class="text-sm text-[var(--text-secondary)] mt-1 line-clamp-2">
                  {milestone.description}
                </p>
              </div>
            </a>
          ))
        }
      </div>
    </div>
  </div>
</section>
