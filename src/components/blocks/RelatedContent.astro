---
/**
 * Related Content Component
 * Displays related articles, BIPs, or resources based on current topic
 */

interface RelatedItem {
  title: string;
  href: string;
  type?: 'article' | 'bip' | 'book' | 'tech';
  description?: string;
}

interface Props {
  title?: string;
  items: RelatedItem[];
  class?: string;
}

const { title = '相關內容', items, class: className = '' } = Astro.props;

const typeLabels = {
  article: '文章',
  bip: 'BIP',
  book: '書籍',
  tech: '技術文檔',
};

const typeColors = {
  article: 'bg-blue-100 text-blue-700 dark:bg-blue-900/30 dark:text-blue-400',
  bip: 'bg-purple-100 text-purple-700 dark:bg-purple-900/30 dark:text-purple-400',
  book: 'bg-green-100 text-green-700 dark:bg-green-900/30 dark:text-green-400',
  tech: 'bg-bitcoin-100 text-bitcoin-700 dark:bg-bitcoin-900/30 dark:text-bitcoin-400',
};
---

<aside class:list={['related-content', className]}>
  <h3 class="text-lg font-semibold text-[var(--text-primary)] mb-4">{title}</h3>

  <div class="space-y-3">
    {
      items.map((item) => (
        <a
          href={item.href}
          class="block p-3 rounded-lg bg-[var(--bg-secondary)] hover:bg-[var(--bg-tertiary)] border border-[var(--border-default)] hover:border-[var(--border-hover)] transition-colors group"
        >
          <div class="flex items-start gap-3">
            {item.type && (
              <span
                class={`text-xs px-2 py-0.5 rounded-full flex-shrink-0 ${typeColors[item.type]}`}
              >
                {typeLabels[item.type]}
              </span>
            )}
            <div class="flex-1 min-w-0">
              <span class="block font-medium text-[var(--text-primary)] group-hover:text-bitcoin-500 transition-colors truncate">
                {item.title}
              </span>
              {item.description && (
                <span class="block text-sm text-[var(--text-tertiary)] mt-1 line-clamp-2">
                  {item.description}
                </span>
              )}
            </div>
            <svg
              class="w-4 h-4 text-[var(--text-tertiary)] group-hover:text-bitcoin-500 transition-colors flex-shrink-0 mt-1"
              fill="none"
              viewBox="0 0 24 24"
              stroke="currentColor"
              stroke-width="2"
            >
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
            </svg>
          </div>
        </a>
      ))
    }
  </div>
</aside>

<style>
  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
</style>
