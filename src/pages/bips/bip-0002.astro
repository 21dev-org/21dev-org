---
import ArticleLayout from '@/layouts/ArticleLayout.astro';
import Tag from '@/components/ui/Tag.astro';
---

<ArticleLayout
  title="BIP-2: BIP 流程"
  description="定義 Bitcoin Improvement Proposals 的提交、審核和實施流程。"
  breadcrumbs={[{ label: 'BIPs', href: '/bips/' }, { label: 'BIP-2' }]}
  tags={['Process', 'Active']}
  author="Luke Dashjr"
  date={new Date('2016-02-03')}
  prevPage={{ title: 'BIP-1: BIP 準則', href: '/bips/bip-0001' }}
  nextPage={{ title: 'BIP-8: Version Bits', href: '/bips/bip-0008' }}
>
  <div
    class="not-prose mb-8 p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]"
  >
    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
      <div>
        <span class="text-[var(--text-tertiary)]">BIP 編號</span>
        <p class="font-semibold text-[var(--text-primary)]">2</p>
      </div>
      <div>
        <span class="text-[var(--text-tertiary)]">類型</span>
        <p class="font-semibold text-[var(--text-primary)]">Process</p>
      </div>
      <div>
        <span class="text-[var(--text-tertiary)]">狀態</span>
        <p><Tag variant="bitcoin" size="sm">Active</Tag></p>
      </div>
      <div>
        <span class="text-[var(--text-tertiary)]">取代</span>
        <p class="font-semibold text-[var(--text-primary)]">BIP-1</p>
      </div>
    </div>
  </div>

  <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-8 mb-4">摘要</h2>
  <p class="text-[var(--text-secondary)] leading-relaxed mb-6">
    BIP-2 定義了 Bitcoin Improvement Proposal（比特幣改進提案）的標準化流程。 它描述了 BIP
    的類型、格式、工作流程和生命週期，取代了原始的 BIP-1。
  </p>

  <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-8 mb-4">BIP 類型</h2>

  <div class="not-prose mb-8 space-y-4">
    <div class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
      <h4 class="font-semibold text-[var(--text-primary)] mb-2">Standards Track（標準追蹤）</h4>
      <p class="text-sm text-[var(--text-secondary)]">
        描述影響大多數或所有比特幣實現的變更，例如網路協議變更、交易驗證規則變更、
        或任何影響使用比特幣的應用互操作性的變更。
      </p>
      <div class="mt-2 flex flex-wrap gap-2">
        <span class="text-xs px-2 py-1 rounded bg-[var(--bg-primary)] text-[var(--text-tertiary)]"
          >共識層</span
        >
        <span class="text-xs px-2 py-1 rounded bg-[var(--bg-primary)] text-[var(--text-tertiary)]"
          >網路層</span
        >
        <span class="text-xs px-2 py-1 rounded bg-[var(--bg-primary)] text-[var(--text-tertiary)]"
          >應用層</span
        >
      </div>
    </div>
    <div class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
      <h4 class="font-semibold text-[var(--text-primary)] mb-2">Informational（資訊性）</h4>
      <p class="text-sm text-[var(--text-secondary)]">
        描述比特幣設計問題，或為比特幣社群提供一般性指南或資訊。 資訊性 BIP
        不提出新功能，也不一定代表社群共識。
      </p>
    </div>
    <div class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
      <h4 class="font-semibold text-[var(--text-primary)] mb-2">Process（流程）</h4>
      <p class="text-sm text-[var(--text-secondary)]">
        描述圍繞比特幣的流程，或建議對流程進行變更。
        例如程序、指南、決策過程的變更，以及對比特幣開發工具或環境的變更。
      </p>
    </div>
  </div>

  <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-8 mb-4">BIP 工作流程</h2>

  <h3 class="text-xl font-semibold text-[var(--text-primary)] mt-6 mb-3">提案階段</h3>

  <div
    class="not-prose mb-8 p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]"
  >
    <pre
      class="text-sm overflow-x-auto font-mono">
想法產生
    ↓
在 bitcoin-dev 郵件列表討論
    ↓
撰寫 BIP 草案
    ↓
提交 Pull Request 到 bitcoin/bips 倉庫
    ↓
BIP 編輯審核格式
    ↓
分配 BIP 編號
    ↓
進入正式流程</pre>
  </div>

  <h3 class="text-xl font-semibold text-[var(--text-primary)] mt-6 mb-3">BIP 狀態</h3>

  <div class="not-prose mb-8 overflow-x-auto">
    <table class="w-full text-sm border-collapse" aria-label="BIP 狀態類型及說明">
      <thead>
        <tr class="border-b border-[var(--border-default)]">
          <th scope="col" class="text-left p-3 text-[var(--text-primary)]">狀態</th>
          <th scope="col" class="text-left p-3 text-[var(--text-primary)]">說明</th>
        </tr>
      </thead>
      <tbody class="text-[var(--text-secondary)]">
        <tr class="border-b border-[var(--border-default)]">
          <td class="p-3 font-mono">Draft</td>
          <td class="p-3">草案階段，正在積極開發和修改</td>
        </tr>
        <tr class="border-b border-[var(--border-default)]">
          <td class="p-3 font-mono">Proposed</td>
          <td class="p-3">已提出，等待社群審核和討論</td>
        </tr>
        <tr class="border-b border-[var(--border-default)]">
          <td class="p-3 font-mono">Final</td>
          <td class="p-3">已最終確定，不再更改（除非有勘誤）</td>
        </tr>
        <tr class="border-b border-[var(--border-default)]">
          <td class="p-3 font-mono">Active</td>
          <td class="p-3">活躍使用中（僅適用於 Process BIP）</td>
        </tr>
        <tr class="border-b border-[var(--border-default)]">
          <td class="p-3 font-mono">Replaced</td>
          <td class="p-3">已被後續 BIP 取代</td>
        </tr>
        <tr class="border-b border-[var(--border-default)]">
          <td class="p-3 font-mono">Withdrawn</td>
          <td class="p-3">作者已撤回提案</td>
        </tr>
        <tr class="border-b border-[var(--border-default)]">
          <td class="p-3 font-mono">Deferred</td>
          <td class="p-3">暫時擱置，可能未來重新考慮</td>
        </tr>
        <tr>
          <td class="p-3 font-mono">Rejected</td>
          <td class="p-3">已被拒絕</td>
        </tr>
      </tbody>
    </table>
  </div>

  <h3 class="text-xl font-semibold text-[var(--text-primary)] mt-6 mb-3">狀態轉換圖</h3>

  <div
    class="not-prose mb-8 p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]"
  >
    <pre
      class="text-sm overflow-x-auto font-mono">
                    ┌──────────┐
                    │  Draft   │
                    └────┬─────┘
                         │
            ┌────────────┼────────────┐
            ↓            ↓            ↓
     ┌──────────┐  ┌──────────┐  ┌──────────┐
     │ Withdrawn│  │ Proposed │  │ Deferred │
     └──────────┘  └────┬─────┘  └──────────┘
                        │
            ┌───────────┼───────────┐
            ↓           ↓           ↓
     ┌──────────┐  ┌──────────┐  ┌──────────┐
     │ Rejected │  │  Final   │  │  Active  │
     └──────────┘  └────┬─────┘  └──────────┘
                        │
                        ↓
                 ┌──────────┐
                 │ Replaced │
                 └──────────┘</pre>
  </div>

  <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-8 mb-4">BIP 格式</h2>

  <p class="text-[var(--text-secondary)] leading-relaxed mb-4">每個 BIP 必須包含以下部分：</p>

  <div class="not-prose mb-8 space-y-3">
    <div class="p-3 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
      <span class="font-medium text-[var(--text-primary)]">Preamble（前言）</span>
      <span class="text-sm text-[var(--text-secondary)] ml-2">— 包含元資料的 RFC 822 風格頭部</span>
    </div>
    <div class="p-3 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
      <span class="font-medium text-[var(--text-primary)]">Abstract（摘要）</span>
      <span class="text-sm text-[var(--text-secondary)] ml-2">— 技術規範的簡短描述</span>
    </div>
    <div class="p-3 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
      <span class="font-medium text-[var(--text-primary)]">Copyright（版權）</span>
      <span class="text-sm text-[var(--text-secondary)] ml-2">— 必須是 CC0 或其他開放授權</span>
    </div>
    <div class="p-3 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
      <span class="font-medium text-[var(--text-primary)]">Motivation（動機）</span>
      <span class="text-sm text-[var(--text-secondary)] ml-2">— 為什麼需要這個提案</span>
    </div>
    <div class="p-3 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
      <span class="font-medium text-[var(--text-primary)]">Specification（規範）</span>
      <span class="text-sm text-[var(--text-secondary)] ml-2">— 技術規範的詳細描述</span>
    </div>
    <div class="p-3 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
      <span class="font-medium text-[var(--text-primary)]">Rationale（理由）</span>
      <span class="text-sm text-[var(--text-secondary)] ml-2">— 設計決策的解釋</span>
    </div>
    <div class="p-3 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
      <span class="font-medium text-[var(--text-primary)]"
        >Backwards Compatibility（向後相容性）</span
      >
      <span class="text-sm text-[var(--text-secondary)] ml-2">— 與現有系統的相容性說明</span>
    </div>
    <div class="p-3 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
      <span class="font-medium text-[var(--text-primary)]"
        >Reference Implementation（參考實作）</span
      >
      <span class="text-sm text-[var(--text-secondary)] ml-2">— 可選的代碼實作</span>
    </div>
  </div>

  <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-8 mb-4">軟分叉啟用</h2>

  <p class="text-[var(--text-secondary)] leading-relaxed mb-4">
    對於需要軟分叉的 Standards Track BIP，必須包含啟用機制的描述。常見的啟用機制包括：
  </p>

  <div class="not-prose mb-8 grid md:grid-cols-2 gap-4">
    <div class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
      <h4 class="font-semibold text-[var(--text-primary)] mb-2">BIP-9</h4>
      <p class="text-sm text-[var(--text-secondary)]">
        Version bits with timeout and delay，使用區塊版本號位元進行信號，有超時機制。
      </p>
    </div>
    <div class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
      <h4 class="font-semibold text-[var(--text-primary)] mb-2">BIP-8</h4>
      <p class="text-sm text-[var(--text-secondary)]">
        改進的 Version bits，支持強制啟用（LOT=true）選項。
      </p>
    </div>
  </div>

  <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-8 mb-4">BIP 編輯</h2>

  <p class="text-[var(--text-secondary)] leading-relaxed mb-4">BIP 編輯負責管理 BIP 倉庫，包括：</p>

  <ul class="space-y-2 text-[var(--text-secondary)] mb-6">
    <li>• 審核 BIP 格式是否正確</li>
    <li>• 分配 BIP 編號</li>
    <li>• 合併符合要求的 Pull Request</li>
    <li>• 維護 BIP 索引</li>
  </ul>

  <div class="not-prose mb-8 p-4 rounded-lg bg-yellow-500/10 border border-yellow-500/30">
    <h4 class="font-semibold text-[var(--text-primary)] mb-2">注意</h4>
    <p class="text-sm text-[var(--text-secondary)]">
      BIP 編輯不對提案的技術內容做出判斷。格式正確的 BIP 會被接受， 技術爭議由社群通過討論解決。
    </p>
  </div>

  <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-8 mb-4">總結</h2>
  <p class="text-[var(--text-secondary)] leading-relaxed mb-4">
    BIP-2 提供了一個結構化的流程，讓比特幣社群可以協調地提出、討論和實施協議變更。
    這個流程確保了變更經過充分審核，同時保持開放和透明。
  </p>

  <div
    class="not-prose mt-8 p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]"
  >
    <h4 class="font-semibold text-[var(--text-primary)] mb-2">延伸閱讀</h4>
    <ul class="text-sm text-[var(--text-secondary)] space-y-1">
      <li>
        <a
          href="https://github.com/bitcoin/bips/blob/master/bip-0002.mediawiki"
          target="_blank"
          rel="noopener noreferrer"
          class="text-bitcoin-500 hover:underline"
        >
          BIP-2 完整規格
        </a>
      </li>
      <li>
        <a
          href="https://github.com/bitcoin/bips"
          target="_blank"
          rel="noopener noreferrer"
          class="text-bitcoin-500 hover:underline"
        >
          BIP 倉庫
        </a>
      </li>
    </ul>
  </div>
</ArticleLayout>
