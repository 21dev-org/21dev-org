---
import PageLayout from '@/layouts/PageLayout.astro';
import BitcoinLogo from '@/components/svg/BitcoinLogo.astro';
import LightningBolt from '@/components/svg/LightningBolt.astro';
import NostrIcon from '@/components/svg/NostrIcon.astro';
import Button from '@/components/ui/Button.astro';

const technologies = [
  {
    id: 'bitcoin-core',
    name: 'Bitcoin Core',
    tagline: '比特幣核心協議',
    description:
      '比特幣網路的參考實現。共識機制、P2P 網路、交易驗證、區塊同步，想懂比特幣怎麼運作，從這裡開始。',
    icon: 'bitcoin',
    href: '/tech/bitcoin-core/',
    topics: ['共識機制', 'P2P 網路', '交易驗證', '區塊同步', 'mempool', 'UTXO 集'],
    resources: [
      { title: '架構概述', href: '/tech/bitcoin-core/' },
      { title: '參與開發', href: '/tech/bitcoin-core/contribute' },
    ],
  },
  {
    id: 'lightning',
    name: 'Lightning Network',
    tagline: 'Layer 2 擴展方案',
    description: '比特幣的 Layer 2 支付協議。支付通道、HTLC、路由，讓比特幣可以即時、便宜地轉帳。',
    icon: 'lightning',
    href: '/tech/lightning/',
    topics: ['支付通道', 'HTLC', '路由算法', 'BOLT 規範', '發票系統', '流動性管理'],
    resources: [
      { title: '運作原理', href: '/tech/lightning/' },
      { title: '實作指南', href: '/tech/lightning/implementations' },
    ],
  },
  {
    id: 'nostr',
    name: 'Nostr',
    tagline: '去中心化社交協議',
    description:
      '去中心化社交協議，簡單到只有幾頁規格。中繼器、事件、NIP 標準，抗審查的通訊怎麼做。',
    icon: 'nostr',
    href: '/tech/nostr/',
    topics: ['中繼器', '事件系統', 'NIP 標準', '密鑰管理', 'Zaps', 'NIP-05'],
    resources: [
      { title: '協議介紹', href: '/tech/nostr/' },
      { title: '客戶端', href: '/tech/nostr/clients' },
    ],
  },
];
---

<PageLayout title="技術領域" description="Bitcoin Core、閃電網路、Nostr 技術文件。">
  <!-- Hero section -->
  <section
    class="py-16 md:py-24 bg-gradient-to-b from-[var(--bg-secondary)] to-[var(--bg-primary)]"
  >
    <div class="container-wide">
      <div class="max-w-3xl">
        <h1 class="text-4xl md:text-5xl font-bold text-[var(--text-primary)] mb-6">技術</h1>
        <p class="text-xl text-[var(--text-secondary)]">Bitcoin Core、閃電網路、Nostr。</p>
      </div>
    </div>
  </section>

  <!-- Technologies -->
  <section class="py-16 md:py-24">
    <div class="container-wide">
      <div class="space-y-12">
        {
          technologies.map((tech, index) => (
            <div
              class={`flex flex-col lg:flex-row gap-8 lg:gap-12 ${index % 2 === 1 ? 'lg:flex-row-reverse' : ''}`}
            >
              {/* Icon and visual */}
              <div class="lg:w-1/3">
                <div class="aspect-square max-w-sm mx-auto lg:mx-0 rounded-2xl bg-gradient-to-br from-neutral-100 to-neutral-50 dark:from-neutral-800 dark:to-neutral-900 flex items-center justify-center">
                  {tech.icon === 'bitcoin' && <BitcoinLogo size={120} class="opacity-80" />}
                  {tech.icon === 'lightning' && <LightningBolt size={120} class="opacity-80" />}
                  {tech.icon === 'nostr' && <NostrIcon size={120} class="opacity-80" />}
                </div>
              </div>

              {/* Content */}
              <div class="lg:w-2/3">
                <div class="inline-block px-3 py-1 rounded-full text-xs font-medium bg-bitcoin-100 text-bitcoin-700 dark:bg-bitcoin-900/30 dark:text-bitcoin-400 mb-4">
                  {tech.tagline}
                </div>
                <h2 class="text-3xl font-bold text-[var(--text-primary)] mb-4">{tech.name}</h2>
                <p class="text-lg text-[var(--text-secondary)] mb-6">{tech.description}</p>

                {/* Topics */}
                <div class="flex flex-wrap gap-2 mb-6">
                  {tech.topics.map((topic) => (
                    <span class="px-3 py-1 text-sm rounded-lg bg-neutral-100 text-neutral-600 dark:bg-neutral-800 dark:text-neutral-400">
                      {topic}
                    </span>
                  ))}
                </div>

                {/* Resources */}
                <div class="flex flex-wrap gap-3">
                  {tech.resources.map((resource, i) => (
                    <Button href={resource.href} variant={i === 0 ? 'primary' : 'secondary'}>
                      {resource.title}
                    </Button>
                  ))}
                </div>
              </div>
            </div>
          ))
        }
      </div>
    </div>
  </section>

  <!-- More technologies coming -->
  <section class="py-12 md:py-16 bg-[var(--bg-secondary)]">
    <div class="container-wide">
      <p class="text-[var(--text-secondary)] text-center">
        之後會加 Taproot、RGB、Ark。有想看的主題可以<a
          href="https://github.com/21dev-org/21dev-org/issues"
          class="text-bitcoin-700 underline decoration-bitcoin-700/50 hover:decoration-bitcoin-700"
          >開 issue</a
        >。
      </p>
    </div>
  </section>
</PageLayout>
