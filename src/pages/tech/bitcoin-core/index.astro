---
import PageLayout from '@/layouts/PageLayout.astro';
import Button from '@/components/ui/Button.astro';
import Card from '@/components/ui/Card.astro';
import BitcoinLogo from '@/components/svg/BitcoinLogo.astro';
import Breadcrumb from '@/components/ui/Breadcrumb.astro';
---

<PageLayout
  title="Bitcoin Core"
  description="比特幣核心協議的參考實現，了解共識機制、網路協議與區塊鏈技術。"
>
  <!-- Hero section -->
  <section
    class="py-16 md:py-24 bg-gradient-to-b from-[var(--bg-secondary)] to-[var(--bg-primary)] relative overflow-hidden"
  >
    <div class="absolute inset-0 opacity-5">
      <div class="absolute top-1/4 left-1/4 w-96 h-96 bg-bitcoin-500 rounded-full blur-3xl"></div>
    </div>
    <div class="container-wide relative">
      <Breadcrumb items={[{ label: '技術', href: '/tech/' }, { label: 'Bitcoin Core' }]} />
      <div class="flex flex-col md:flex-row md:items-center gap-8">
        <div class="flex-1">
          <div class="flex items-center gap-4 mb-6">
            <BitcoinLogo size={48} />
            <span
              class="px-3 py-1 rounded-full text-sm font-medium bg-bitcoin-500/10 text-bitcoin-500"
            >
              Layer 1
            </span>
          </div>
          <h1 class="text-4xl md:text-5xl font-bold text-[var(--text-primary)] mb-6">
            Bitcoin Core
          </h1>
          <p class="text-xl text-[var(--text-secondary)] mb-8">
            比特幣網路的參考實現，定義了協議標準。想搞懂比特幣底層怎麼運作，讀這個。
          </p>
          <div class="flex flex-wrap gap-4">
            <Button href="https://bitcoin.org/en/bitcoin-core/" variant="primary" external>
              官方網站
            </Button>
            <Button href="https://github.com/bitcoin/bitcoin" variant="secondary" external>
              GitHub
            </Button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Core concepts -->
  <section class="py-16 md:py-24">
    <div class="container-wide">
      <h2 class="text-3xl font-bold text-[var(--text-primary)] mb-12 text-center">核心概念</h2>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-6">
        {
          [
            {
              title: '共識機制',
              description: 'PoW 確保所有節點對區塊鏈狀態達成一致，防止雙重支付。',
            },
            {
              title: 'P2P 網路',
              description: '節點之間直接通訊，沒有中心伺服器。',
            },
            {
              title: 'UTXO 模型',
              description: '追蹤比特幣的所有權和交易歷史。',
            },
            {
              title: '區塊驗證',
              description: '每個節點獨立驗證區塊，包括交易、PoW 和結構。',
            },
            {
              title: 'Mempool',
              description: '待確認的交易池，礦工從中選擇交易打包。',
            },
            {
              title: 'Script',
              description: '定義交易花費條件的腳本語言。',
            },
          ].map((concept) => (
            <Card padding="lg">
              <h3 class="text-xl font-semibold text-[var(--text-primary)] mb-2">{concept.title}</h3>
              <p class="text-[var(--text-secondary)]">{concept.description}</p>
            </Card>
          ))
        }
      </div>
    </div>
  </section>

  <!-- Architecture -->
  <section class="py-16 md:py-24 bg-[var(--bg-secondary)]">
    <div class="container-wide">
      <div class="max-w-4xl mx-auto">
        <h2 class="text-3xl font-bold text-[var(--text-primary)] mb-8 text-center">架構概覽</h2>
        <div class="space-y-6">
          {
            [
              {
                name: '網路層 (Net)',
                desc: '處理 P2P 連接、訊息傳遞和節點發現',
              },
              {
                name: '驗證層 (Validation)',
                desc: '驗證交易和區塊的有效性',
              },
              {
                name: '共識層 (Consensus)',
                desc: '實現共識規則和區塊鏈狀態管理',
              },
              {
                name: '錢包 (Wallet)',
                desc: '密鑰管理、交易建立和簽名',
              },
              {
                name: 'RPC 介面',
                desc: '提供 JSON-RPC API 供外部程式調用',
              },
            ].map((layer, i) => (
              <div class="flex items-start gap-4 p-6 rounded-xl bg-[var(--surface-elevated)] border border-[var(--border-default)]">
                <div class="flex-shrink-0 w-10 h-10 rounded-lg bg-bitcoin-500 text-white flex items-center justify-center font-bold">
                  {i + 1}
                </div>
                <div>
                  <h3 class="font-semibold text-[var(--text-primary)] mb-1">{layer.name}</h3>
                  <p class="text-[var(--text-secondary)]">{layer.desc}</p>
                </div>
              </div>
            ))
          }
        </div>
      </div>
    </div>
  </section>

  <!-- Technical Documentation -->
  <section class="py-16 md:py-24">
    <div class="container-wide">
      <h2 class="text-3xl font-bold text-[var(--text-primary)] mb-4 text-center">技術文檔</h2>
      <p class="text-center text-[var(--text-secondary)] mb-12 max-w-2xl mx-auto">
        深入了解 Bitcoin Core 的核心概念、RPC 接口和網路協議。
      </p>

      <!-- Core Protocol -->
      <div class="mb-12">
        <h3 class="text-xl font-semibold text-[var(--text-primary)] mb-6 flex items-center gap-2">
          <span
            class="w-8 h-8 rounded-lg bg-bitcoin-500 text-white flex items-center justify-center text-sm font-bold"
            >1</span
          >
          核心協議
        </h3>
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
          <Card href="/tech/bitcoin-core/consensus" padding="md">
            <h4 class="font-semibold text-[var(--text-primary)] mb-1">共識機制</h4>
            <p class="text-sm text-[var(--text-secondary)]">PoW、難度調整、分叉處理</p>
          </Card>
          <Card href="/tech/bitcoin-core/block-structure" padding="md">
            <h4 class="font-semibold text-[var(--text-primary)] mb-1">區塊結構</h4>
            <p class="text-sm text-[var(--text-secondary)]">區塊頭、Merkle 樹、Coinbase</p>
          </Card>
          <Card href="/tech/bitcoin-core/transaction" padding="md">
            <h4 class="font-semibold text-[var(--text-primary)] mb-1">交易結構</h4>
            <p class="text-sm text-[var(--text-secondary)]">輸入輸出、腳本、SegWit</p>
          </Card>
          <Card href="/tech/bitcoin-core/utxo" padding="md">
            <h4 class="font-semibold text-[var(--text-primary)] mb-1">UTXO 模型</h4>
            <p class="text-sm text-[var(--text-secondary)]">UTXO 集合、Coin Selection</p>
          </Card>
        </div>
      </div>

      <!-- Developer API -->
      <div class="mb-12">
        <h3 class="text-xl font-semibold text-[var(--text-primary)] mb-6 flex items-center gap-2">
          <span
            class="w-8 h-8 rounded-lg bg-blue-500 text-white flex items-center justify-center text-sm font-bold"
            >2</span
          >
          開發者 API
        </h3>
        <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-4">
          <Card href="/tech/bitcoin-core/rpc-guide" padding="md">
            <h4 class="font-semibold text-[var(--text-primary)] mb-1">RPC 接口指南</h4>
            <p class="text-sm text-[var(--text-secondary)]">配置、認證、調用方法</p>
          </Card>
          <Card href="/tech/bitcoin-core/rpc-wallet" padding="md">
            <h4 class="font-semibold text-[var(--text-primary)] mb-1">錢包 RPC</h4>
            <p class="text-sm text-[var(--text-secondary)]">地址、交易、簽名</p>
          </Card>
          <Card href="/tech/bitcoin-core/rpc-blockchain" padding="md">
            <h4 class="font-semibold text-[var(--text-primary)] mb-1">區塊鏈 RPC</h4>
            <p class="text-sm text-[var(--text-secondary)]">區塊、交易、UTXO 查詢</p>
          </Card>
          <Card href="/tech/bitcoin-core/rpc-network" padding="md">
            <h4 class="font-semibold text-[var(--text-primary)] mb-1">網路 RPC</h4>
            <p class="text-sm text-[var(--text-secondary)]">節點、Mempool、手續費</p>
          </Card>
        </div>
      </div>

      <!-- Network Protocol -->
      <div class="mb-12">
        <h3 class="text-xl font-semibold text-[var(--text-primary)] mb-6 flex items-center gap-2">
          <span
            class="w-8 h-8 rounded-lg bg-purple-500 text-white flex items-center justify-center text-sm font-bold"
            >3</span
          >
          網路協議
        </h3>
        <div class="grid md:grid-cols-3 gap-4">
          <Card href="/tech/bitcoin-core/p2p-protocol" padding="md">
            <h4 class="font-semibold text-[var(--text-primary)] mb-1">P2P 協議概覽</h4>
            <p class="text-sm text-[var(--text-secondary)]">握手、連線類型、BIP-324</p>
          </Card>
          <Card href="/tech/bitcoin-core/message-types" padding="md">
            <h4 class="font-semibold text-[var(--text-primary)] mb-1">訊息類型</h4>
            <p class="text-sm text-[var(--text-secondary)]">控制訊息、數據傳播</p>
          </Card>
          <Card href="/tech/bitcoin-core/node-discovery" padding="md">
            <h4 class="font-semibold text-[var(--text-primary)] mb-1">節點發現</h4>
            <p class="text-sm text-[var(--text-secondary)]">DNS Seeds、地址管理</p>
          </Card>
        </div>
      </div>
    </div>
  </section>

  <!-- Resources -->
  <section class="py-16 md:py-24 bg-[var(--bg-secondary)]">
    <div class="container-wide">
      <h2 class="text-3xl font-bold text-[var(--text-primary)] mb-12 text-center">延伸資源</h2>
      <div class="grid md:grid-cols-2 lg:grid-cols-4 gap-6 max-w-5xl mx-auto">
        <Card href="/books/mastering-bitcoin" padding="md">
          <h3 class="font-semibold text-[var(--text-primary)] mb-1">Mastering Bitcoin</h3>
          <p class="text-sm text-[var(--text-secondary)]">經典技術書籍</p>
        </Card>
        <Card href="/bips/" padding="md">
          <h3 class="font-semibold text-[var(--text-primary)] mb-1">BIP 討論</h3>
          <p class="text-sm text-[var(--text-secondary)]">協議改進提案</p>
        </Card>
        <Card href="/tech/bitcoin-core/contribute" padding="md">
          <h3 class="font-semibold text-[var(--text-primary)] mb-1">參與開發</h3>
          <p class="text-sm text-[var(--text-secondary)]">貢獻代碼指南</p>
        </Card>
        <Card href="https://github.com/bitcoin/bitcoin" padding="md">
          <h3 class="font-semibold text-[var(--text-primary)] mb-1">GitHub</h3>
          <p class="text-sm text-[var(--text-secondary)]">源代碼倉庫</p>
        </Card>
      </div>
    </div>
  </section>
</PageLayout>
