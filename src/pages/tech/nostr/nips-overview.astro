---
import ArticleLayout from '@/layouts/ArticleLayout.astro';
---

<ArticleLayout
  title="NIP 規範概覽"
  description="全面了解 Nostr Implementation Possibilities (NIPs)，探索協議的各種擴展和標準。"
  breadcrumbs={[
    { label: '技術', href: '/tech/' },
    { label: 'Nostr', href: '/tech/nostr/' },
    { label: 'NIP 規範概覽' },
  ]}
  difficulty="intermediate"
  readingTime="20 分鐘"
  prevPage={{ title: '中繼器運作', href: '/tech/nostr/relays' }}
  nextPage={{ title: 'NIP-05 域名驗證', href: '/tech/nostr/nip-05' }}
>
  <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-8 mb-4">什麼是 NIP？</h2>
  <p class="text-[var(--text-secondary)] leading-relaxed mb-6">
    NIP（Nostr Implementation Possibilities）是 Nostr 協議的擴展標準文件。
    類似於比特幣的 BIP 或以太坊的 EIP，NIP 定義了協議的各種功能和最佳實踐。
    NIP 由社群提出、討論和維護。
  </p>

  <div class="not-prose mb-8 p-4 rounded-lg bg-purple-500/10 border border-purple-500/30">
    <p class="text-sm text-purple-700 dark:text-purple-400">
      <strong>標準化過程：</strong>
      NIP 通過 GitHub Pull Request 提出，經過社群討論後合併。
      實現者可以選擇性地支援 NIP，中繼器通過 NIP-11 公布支援的 NIP。
    </p>
  </div>

  <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-8 mb-4">NIP 分類</h2>

  <h3 class="text-xl font-semibold text-[var(--text-primary)] mt-6 mb-3">核心協議</h3>

  <div class="not-prose mb-8 overflow-x-auto">
    <table class="w-full text-sm border border-[var(--border-default)] rounded-lg overflow-hidden">
      <thead class="bg-[var(--bg-secondary)]">
        <tr>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">NIP</th>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">名稱</th>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">描述</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">01</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">基本協議</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">事件格式、過濾器、訊息類型</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">02</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">關注列表</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">kind:3 關注列表事件</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">09</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">事件刪除</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">kind:5 刪除請求</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">10</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">文本注釋</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">回覆和引用的標記規範</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">11</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">中繼器資訊</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">中繼器元數據文件</td>
        </tr>
      </tbody>
    </table>
  </div>

  <h3 class="text-xl font-semibold text-[var(--text-primary)] mt-6 mb-3">身份與編碼</h3>

  <div class="not-prose mb-8 overflow-x-auto">
    <table class="w-full text-sm border border-[var(--border-default)] rounded-lg overflow-hidden">
      <thead class="bg-[var(--bg-secondary)]">
        <tr>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">NIP</th>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">名稱</th>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">描述</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">05</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">域名驗證</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">DNS 域名到公鑰的映射</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">19</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">bech32 編碼</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">npub、nsec、note 等編碼格式</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">21</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">nostr: URI</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">nostr: 協議 URI 格式</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">39</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">外部身份</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">連結 GitHub、Twitter 等身份</td>
        </tr>
      </tbody>
    </table>
  </div>

  <h3 class="text-xl font-semibold text-[var(--text-primary)] mt-6 mb-3">加密與安全</h3>

  <div class="not-prose mb-8 overflow-x-auto">
    <table class="w-full text-sm border border-[var(--border-default)] rounded-lg overflow-hidden">
      <thead class="bg-[var(--bg-secondary)]">
        <tr>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">NIP</th>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">名稱</th>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">描述</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">04</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">加密私訊（舊）</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">NIP-04 加密 DM（已不推薦）</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">17</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">私訊</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">改進的私訊方案（kind:14）</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">42</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">認證</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">中繼器認證協議</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">44</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">加密（新）</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">改進的加密方案</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">46</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">遠端簽名</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">Nostr Connect 遠端簽名</td>
        </tr>
      </tbody>
    </table>
  </div>

  <h3 class="text-xl font-semibold text-[var(--text-primary)] mt-6 mb-3">支付與經濟</h3>

  <div class="not-prose mb-8 overflow-x-auto">
    <table class="w-full text-sm border border-[var(--border-default)] rounded-lg overflow-hidden">
      <thead class="bg-[var(--bg-secondary)]">
        <tr>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">NIP</th>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">名稱</th>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">描述</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">47</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">錢包連接</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">Nostr Wallet Connect</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">57</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">Zaps</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">閃電網路打賞</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">60</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">Cashu</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">Cashu 電子現金錢包</td>
        </tr>
      </tbody>
    </table>
  </div>

  <h3 class="text-xl font-semibold text-[var(--text-primary)] mt-6 mb-3">內容與媒體</h3>

  <div class="not-prose mb-8 overflow-x-auto">
    <table class="w-full text-sm border border-[var(--border-default)] rounded-lg overflow-hidden">
      <thead class="bg-[var(--bg-secondary)]">
        <tr>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">NIP</th>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">名稱</th>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">描述</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">23</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">長篇文章</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">kind:30023 長篇內容</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">25</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">反應</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">kind:7 反應（表情、點讚）</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">27</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">文本格式</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">文本內容格式規範</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">30</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">自訂表情</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">自訂表情包</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">94</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">檔案元數據</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">檔案 hash 和元數據</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">96</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">檔案儲存</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">HTTP 檔案上傳標準</td>
        </tr>
      </tbody>
    </table>
  </div>

  <h3 class="text-xl font-semibold text-[var(--text-primary)] mt-6 mb-3">社交功能</h3>

  <div class="not-prose mb-8 overflow-x-auto">
    <table class="w-full text-sm border border-[var(--border-default)] rounded-lg overflow-hidden">
      <thead class="bg-[var(--bg-secondary)]">
        <tr>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">NIP</th>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">名稱</th>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">描述</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">18</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">轉發</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">kind:6 轉發事件</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">28</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">公開聊天</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">公開聊天室</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">51</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">列表</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">各種列表（靜音、書籤等）</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">56</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">檢舉</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">內容檢舉</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">65</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">中繼器列表</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">用戶偏好的中繼器</td>
        </tr>
      </tbody>
    </table>
  </div>

  <h3 class="text-xl font-semibold text-[var(--text-primary)] mt-6 mb-3">客戶端功能</h3>

  <div class="not-prose mb-8 overflow-x-auto">
    <table class="w-full text-sm border border-[var(--border-default)] rounded-lg overflow-hidden">
      <thead class="bg-[var(--bg-secondary)]">
        <tr>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">NIP</th>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">名稱</th>
          <th class="px-4 py-3 text-left text-[var(--text-primary)]">描述</th>
        </tr>
      </thead>
      <tbody>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">07</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">瀏覽器擴展</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">window.nostr 介面</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">45</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">計數</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">COUNT 訊息</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">50</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">搜尋</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">search 過濾器</td>
        </tr>
        <tr class="border-t border-[var(--border-default)]">
          <td class="px-4 py-3 font-mono text-purple-500">89</td>
          <td class="px-4 py-3 text-[var(--text-primary)]">推薦應用</td>
          <td class="px-4 py-3 text-[var(--text-secondary)]">應用處理器推薦</td>
        </tr>
      </tbody>
    </table>
  </div>

  <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-8 mb-4">重要 NIP 詳解</h2>

  <div class="space-y-4 mb-8">
    <div class="p-4 rounded-lg border border-[var(--border-default)] bg-[var(--surface-elevated)]">
      <h4 class="font-semibold text-[var(--text-primary)] mb-2">NIP-01：基本協議</h4>
      <p class="text-sm text-[var(--text-secondary)]">
        定義事件結構、簽名驗證、過濾器格式和客戶端-中繼器通訊。
        這是所有 Nostr 實現必須支援的基礎。
      </p>
    </div>
    <div class="p-4 rounded-lg border border-[var(--border-default)] bg-[var(--surface-elevated)]">
      <h4 class="font-semibold text-[var(--text-primary)] mb-2">NIP-05：域名驗證</h4>
      <p class="text-sm text-[var(--text-secondary)]">
        允許通過 DNS 域名驗證 Nostr 身份（如 alice@example.com）。
        提供人類可讀的身份標識和額外的信任層。
      </p>
    </div>
    <div class="p-4 rounded-lg border border-[var(--border-default)] bg-[var(--surface-elevated)]">
      <h4 class="font-semibold text-[var(--text-primary)] mb-2">NIP-19：bech32 編碼</h4>
      <p class="text-sm text-[var(--text-secondary)]">
        定義 npub、nsec、note、nprofile、nevent、naddr 等人類可讀格式。
        包含校驗碼防止輸入錯誤。
      </p>
    </div>
    <div class="p-4 rounded-lg border border-[var(--border-default)] bg-[var(--surface-elevated)]">
      <h4 class="font-semibold text-[var(--text-primary)] mb-2">NIP-57：Zaps</h4>
      <p class="text-sm text-[var(--text-secondary)]">
        整合閃電網路支付，允許用戶通過 LNURL 向內容打賞。
        Zap 收據作為公開事件記錄在 Nostr 上。
      </p>
    </div>
  </div>

  <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-8 mb-4">NIP 狀態</h2>

  <div class="not-prose mb-6 p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)] font-mono text-sm overflow-x-auto">
    <pre class="text-[var(--text-secondary)]">{`NIP 狀態類型：

FINAL（最終版）
- 已穩定，不會有重大變更
- 廣泛採用
- 例如：NIP-01, NIP-19

DRAFT（草案）
- 大致穩定，可能有小修改
- 可以開始實現
- 大多數 NIP 處於此狀態

PROPOSAL（提案）
- 仍在討論中
- 可能有重大變更
- 實現時需謹慎

DEPRECATED（已棄用）
- 不再推薦使用
- 有更好的替代方案
- 例如：NIP-04（被 NIP-44 替代）

OPTIONAL（可選）
- 非必要功能
- 根據需求實現
- 例如：NIP-13（工作量證明）`}</pre>
  </div>

  <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-8 mb-4">檢查 NIP 支援</h2>

  <div class="not-prose mb-6 p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)] font-mono text-sm overflow-x-auto">
    <pre class="text-[var(--text-secondary)]">{`檢查中繼器支援的 NIP：

1. 查詢 NIP-11 資訊
   GET https://relay.example.com
   Accept: application/nostr+json

2. 解析 supported_nips 欄位
   {
     "supported_nips": [1, 2, 9, 11, 12, 15, 16, 20, ...]
   }

檢查客戶端功能：
- 檢查 kind 支援
- 測試特定功能
- 查閱客戶端文檔

nostr-tools 範例：
import { nip05, nip19, nip57 } from 'nostr-tools'

// 使用特定 NIP 功能
const profile = await nip05.queryProfile('alice@example.com')
const npub = nip19.npubEncode(pubkey)
const zapEndpoint = await nip57.getZapEndpoint(event)`}</pre>
  </div>

  <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-8 mb-4">貢獻 NIP</h2>

  <div class="not-prose mb-6 p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)] font-mono text-sm overflow-x-auto">
    <pre class="text-[var(--text-secondary)]">{`提交新 NIP 的流程：

1. 研究現有 NIP
   - 確認功能不重複
   - 了解相關 NIP

2. 撰寫 NIP 文件
   - 使用 Markdown 格式
   - 包含動機、規範、範例
   - 參考現有 NIP 格式

3. 提交 Pull Request
   - Fork nostr-protocol/nips
   - 創建新的 NIP 文件
   - 提交 PR 並說明

4. 社群討論
   - 在 GitHub 上討論
   - 在 Nostr 上徵求意見
   - 根據反饋修改

5. 合併與實現
   - 經過足夠討論後合併
   - 開始在客戶端/中繼器實現

NIP 命名：
- 使用下一個可用編號
- 或使用描述性名稱
- 由維護者分配最終編號`}</pre>
  </div>

  <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-8 mb-4">延伸閱讀</h2>

  <ul class="space-y-2 text-[var(--text-secondary)] mb-6">
    <li class="flex items-start gap-2">
      <span class="text-purple-500">•</span>
      <span><a href="https://github.com/nostr-protocol/nips" class="text-purple-500 hover:underline" target="_blank" rel="noopener">NIPs 官方倉庫</a>：所有 NIP 的源文件</span>
    </li>
    <li class="flex items-start gap-2">
      <span class="text-purple-500">•</span>
      <span><a href="https://nips.nostr.com" class="text-purple-500 hover:underline" target="_blank" rel="noopener">NIPs 網站</a>：更易讀的 NIP 瀏覽</span>
    </li>
    <li class="flex items-start gap-2">
      <span class="text-purple-500">•</span>
      <span><a href="/tech/nostr/nip-05" class="text-purple-500 hover:underline">NIP-05 詳解</a>：域名身份驗證</span>
    </li>
    <li class="flex items-start gap-2">
      <span class="text-purple-500">•</span>
      <span><a href="/tech/nostr/nip-57" class="text-purple-500 hover:underline">NIP-57 詳解</a>：Zaps 打賞</span>
    </li>
  </ul>

  <div class="mt-8 p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
    <p class="text-sm text-[var(--text-secondary)]">
      <strong class="text-[var(--text-primary)]">下一步：</strong>
      深入了解 <a href="/tech/nostr/nip-05" class="text-purple-600 dark:text-purple-400 hover:underline">NIP-05 域名驗證</a>
      如何為你的 Nostr 身份添加人類可讀的識別符。
    </p>
  </div>
</ArticleLayout>
