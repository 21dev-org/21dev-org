---
import ArticleLayout from '@/layouts/ArticleLayout.astro';
import { defined } from '@/utils/types';
---

<ArticleLayout
  title="NIP-52: æ—¥æ›†æ´»å‹•"
  subtitle="Calendar Events - å»ä¸­å¿ƒåŒ–æ´»å‹•æ’ç¨‹èˆ‡ RSVP"
  difficulty="intermediate"
  readingTime={12}
  tags={['Nostr', 'NIP-52', 'æ—¥æ›†', 'calendar', 'events']}
  prevPage={defined({ href: '/tech/nostr/nip-51', label: 'NIP-51 åˆ—è¡¨' })}
  nextPage={defined({ href: '/tech/nostr/nip-53', label: 'NIP-53 ç›´æ’­æ´»å‹•' })}
>
  <!-- Breadcrumb -->
  <nav class="flex items-center gap-2 text-sm text-[var(--text-tertiary)] mb-8 flex-wrap">
    <a href="/" class="hover:text-[var(--text-secondary)] transition-colors">é¦–é </a>
    <span>/</span>
    <a href="/tech" class="hover:text-[var(--text-secondary)] transition-colors">æŠ€è¡“</a>
    <span>/</span>
    <a href="/tech/nostr" class="hover:text-[var(--text-secondary)] transition-colors">Nostr</a>
    <span>/</span>
    <span class="text-[var(--text-primary)]">NIP-52</span>
  </nav>

  <!-- Introduction -->
  <section class="mb-12">
    <h2 class="text-2xl font-bold text-[var(--text-primary)] mb-4">æ¦‚è¿°</h2>
    <p class="text-[var(--text-secondary)] mb-4">
      NIP-52 å®šç¾©äº†æ—¥æ›†æ´»å‹•ç³»çµ±ï¼Œå…è¨±ç”¨æˆ¶å‰µå»ºã€åˆ†äº«å’Œç®¡ç†æ´»å‹•ã€‚å®ƒæ”¯æ´å…¨å¤©æ´»å‹•å’ŒæŒ‡å®šæ™‚é–“çš„æ´»å‹•ï¼Œ
      åŒ…å« RSVPï¼ˆå›è¦†å‡ºå¸­ï¼‰æ©Ÿåˆ¶ã€åœ°é»æ¨™è¨˜ã€åƒèˆ‡è€…ç®¡ç†ç­‰å®Œæ•´åŠŸèƒ½ï¼Œå¯¦ç¾å»ä¸­å¿ƒåŒ–çš„æ´»å‹•æ’ç¨‹ã€‚
    </p>
    <div class="p-4 rounded-lg bg-purple-500/10 border border-purple-500/20">
      <p class="text-[var(--text-secondary)]">
        <strong class="text-purple-400">æ ¸å¿ƒæ¦‚å¿µï¼š</strong>
        NIP-52 ä½¿ç”¨ä¸‰ç¨®ä¸»è¦äº‹ä»¶é¡å‹ï¼škind 31922ï¼ˆæ—¥æœŸæ´»å‹•ï¼‰ã€kind 31923ï¼ˆæ™‚é–“æ´»å‹•ï¼‰å’Œ kind 31925ï¼ˆRSVPï¼‰ï¼Œ
        ä¸¦å¯é€é kind 31924 æ—¥æ›†åˆ—è¡¨çµ„ç¹”å¤šå€‹æ´»å‹•ã€‚
      </p>
    </div>
  </section>

  <!-- Event Kinds -->
  <section class="mb-12">
    <h2 class="text-2xl font-bold text-[var(--text-primary)] mb-4">äº‹ä»¶é¡å‹</h2>
    <div class="overflow-x-auto">
      <table class="w-full border-collapse mb-4">
        <thead>
          <tr class="border-b border-[var(--border-default)]">
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">Kind</th>
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">åç¨±</th>
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">é¡å‹</th>
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">èªªæ˜</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">31922</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">Date-based Event</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">å¯å®šå€</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">å…¨å¤©æˆ–å¤šæ—¥æ´»å‹•</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">31923</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">Time-based Event</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">å¯å®šå€</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">æŒ‡å®šæ™‚é–“çš„æ´»å‹•</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">31924</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">Calendar</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">å¯å®šå€</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">æ—¥æ›†åˆ—è¡¨ï¼ˆæ´»å‹•é›†åˆï¼‰</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">31925</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">RSVP</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">å¯å®šå€</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">å‡ºå¸­å›è¦†</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Date-based Events -->
  <section class="mb-12">
    <h2 class="text-2xl font-bold text-[var(--text-primary)] mb-4">æ—¥æœŸæ´»å‹•ï¼ˆKind 31922ï¼‰</h2>
    <p class="text-[var(--text-secondary)] mb-4">
      ç”¨æ–¼å…¨å¤©æˆ–è·¨å¤šæ—¥çš„æ´»å‹•ï¼Œä¸æ¶‰åŠå…·é«”æ™‚é–“å’Œæ™‚å€ï¼š
    </p>
    <div class="overflow-x-auto">
      <table class="w-full border-collapse mb-4">
        <thead>
          <tr class="border-b border-[var(--border-default)]">
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">æ¨™ç±¤</th>
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">å¿…è¦</th>
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">æ ¼å¼</th>
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">èªªæ˜</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">d</td>
            <td class="py-3 px-4 text-green-400">âœ“</td>
            <td class="py-3 px-4 font-mono text-sm text-[var(--text-secondary)]">["d", "&lt;uuid&gt;"]</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">å”¯ä¸€æ¨™è­˜ç¬¦</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">title</td>
            <td class="py-3 px-4 text-green-400">âœ“</td>
            <td class="py-3 px-4 font-mono text-sm text-[var(--text-secondary)]">["title", "æ´»å‹•åç¨±"]</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">æ´»å‹•æ¨™é¡Œ</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">start</td>
            <td class="py-3 px-4 text-green-400">âœ“</td>
            <td class="py-3 px-4 font-mono text-sm text-[var(--text-secondary)]">["start", "2024-12-25"]</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">é–‹å§‹æ—¥æœŸï¼ˆISO 8601ï¼‰</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">end</td>
            <td class="py-3 px-4 text-gray-400">-</td>
            <td class="py-3 px-4 font-mono text-sm text-[var(--text-secondary)]">["end", "2024-12-26"]</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">çµæŸæ—¥æœŸï¼ˆå¤šæ—¥æ´»å‹•ï¼‰</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Time-based Events -->
  <section class="mb-12">
    <h2 class="text-2xl font-bold text-[var(--text-primary)] mb-4">æ™‚é–“æ´»å‹•ï¼ˆKind 31923ï¼‰</h2>
    <p class="text-[var(--text-secondary)] mb-4">
      ç”¨æ–¼æœ‰å…·é«”æ™‚é–“çš„æ´»å‹•ï¼Œæ”¯æ´æ™‚å€è¨­å®šï¼š
    </p>
    <div class="overflow-x-auto">
      <table class="w-full border-collapse mb-4">
        <thead>
          <tr class="border-b border-[var(--border-default)]">
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">æ¨™ç±¤</th>
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">å¿…è¦</th>
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">æ ¼å¼</th>
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">èªªæ˜</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">d</td>
            <td class="py-3 px-4 text-green-400">âœ“</td>
            <td class="py-3 px-4 font-mono text-sm text-[var(--text-secondary)]">["d", "&lt;uuid&gt;"]</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">å”¯ä¸€æ¨™è­˜ç¬¦</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">title</td>
            <td class="py-3 px-4 text-green-400">âœ“</td>
            <td class="py-3 px-4 font-mono text-sm text-[var(--text-secondary)]">["title", "æ´»å‹•åç¨±"]</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">æ´»å‹•æ¨™é¡Œ</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">start</td>
            <td class="py-3 px-4 text-green-400">âœ“</td>
            <td class="py-3 px-4 font-mono text-sm text-[var(--text-secondary)]">["start", "1703487600"]</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">é–‹å§‹æ™‚é–“ï¼ˆUnix æ™‚é–“æˆ³ï¼‰</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">end</td>
            <td class="py-3 px-4 text-gray-400">-</td>
            <td class="py-3 px-4 font-mono text-sm text-[var(--text-secondary)]">["end", "1703494800"]</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">çµæŸæ™‚é–“</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">start_tzid</td>
            <td class="py-3 px-4 text-gray-400">-</td>
            <td class="py-3 px-4 font-mono text-sm text-[var(--text-secondary)]">["start_tzid", "Asia/Taipei"]</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">é–‹å§‹æ™‚é–“æ™‚å€</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">end_tzid</td>
            <td class="py-3 px-4 text-gray-400">-</td>
            <td class="py-3 px-4 font-mono text-sm text-[var(--text-secondary)]">["end_tzid", "Asia/Taipei"]</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">çµæŸæ™‚é–“æ™‚å€</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Common Tags -->
  <section class="mb-12">
    <h2 class="text-2xl font-bold text-[var(--text-primary)] mb-4">é€šç”¨æ¨™ç±¤</h2>
    <p class="text-[var(--text-secondary)] mb-4">
      ä»¥ä¸‹æ¨™ç±¤é©ç”¨æ–¼æ—¥æœŸæ´»å‹•å’Œæ™‚é–“æ´»å‹•ï¼š
    </p>
    <div class="overflow-x-auto">
      <table class="w-full border-collapse mb-4">
        <thead>
          <tr class="border-b border-[var(--border-default)]">
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">æ¨™ç±¤</th>
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">æ ¼å¼</th>
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">èªªæ˜</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">summary</td>
            <td class="py-3 px-4 font-mono text-sm text-[var(--text-secondary)]">["summary", "ç°¡çŸ­æè¿°"]</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">æ´»å‹•æ‘˜è¦</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">image</td>
            <td class="py-3 px-4 font-mono text-sm text-[var(--text-secondary)]">["image", "https://..."]</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">æ´»å‹•åœ–ç‰‡</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">location</td>
            <td class="py-3 px-4 font-mono text-sm text-[var(--text-secondary)]">["location", "å°åŒ—å¸‚..."]</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">æ´»å‹•åœ°é»</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">g</td>
            <td class="py-3 px-4 font-mono text-sm text-[var(--text-secondary)]">["g", "wsqqk"]</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">Geohashï¼ˆåœ°ç†ä½ç½®æœå°‹ï¼‰</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">p</td>
            <td class="py-3 px-4 font-mono text-sm text-[var(--text-secondary)]">["p", "pubkey", "relay", "role"]</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">åƒèˆ‡è€…</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">t</td>
            <td class="py-3 px-4 font-mono text-sm text-[var(--text-secondary)]">["t", "meetup"]</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">ä¸»é¡Œæ¨™ç±¤</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">r</td>
            <td class="py-3 px-4 font-mono text-sm text-[var(--text-secondary)]">["r", "https://meet.example.com"]</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">å¤–éƒ¨é€£çµï¼ˆè¦–è¨Šæœƒè­°ç­‰ï¼‰</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- RSVP -->
  <section class="mb-12">
    <h2 class="text-2xl font-bold text-[var(--text-primary)] mb-4">RSVP å›è¦†ï¼ˆKind 31925ï¼‰</h2>
    <p class="text-[var(--text-secondary)] mb-4">
      ç”¨æˆ¶å¯ä»¥é€é RSVP äº‹ä»¶å›è¦†æ´»å‹•é‚€è«‹ï¼š
    </p>
    <div class="grid md:grid-cols-3 gap-4 mb-6">
      <div class="p-4 rounded-lg bg-green-500/10 border border-green-500/20">
        <h4 class="font-semibold text-green-400 mb-2 flex items-center gap-2">
          <span class="text-xl">âœ“</span> accepted
        </h4>
        <p class="text-sm text-[var(--text-secondary)]">ç¢ºèªåƒåŠ </p>
      </div>
      <div class="p-4 rounded-lg bg-red-500/10 border border-red-500/20">
        <h4 class="font-semibold text-red-400 mb-2 flex items-center gap-2">
          <span class="text-xl">âœ—</span> declined
        </h4>
        <p class="text-sm text-[var(--text-secondary)]">ç„¡æ³•åƒåŠ </p>
      </div>
      <div class="p-4 rounded-lg bg-yellow-500/10 border border-yellow-500/20">
        <h4 class="font-semibold text-yellow-400 mb-2 flex items-center gap-2">
          <span class="text-xl">?</span> tentative
        </h4>
        <p class="text-sm text-[var(--text-secondary)]">å¾…å®šï¼Œå¯èƒ½åƒåŠ </p>
      </div>
    </div>

    <div class="overflow-x-auto">
      <table class="w-full border-collapse mb-4">
        <thead>
          <tr class="border-b border-[var(--border-default)]">
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">æ¨™ç±¤</th>
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">å¿…è¦</th>
            <th class="text-left py-3 px-4 text-[var(--text-primary)]">èªªæ˜</th>
          </tr>
        </thead>
        <tbody>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">a</td>
            <td class="py-3 px-4 text-green-400">âœ“</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">æŒ‡å‘æ´»å‹•çš„åº§æ¨™</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">d</td>
            <td class="py-3 px-4 text-green-400">âœ“</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">èˆ‡ a æ¨™ç±¤ç›¸åŒçš„åº§æ¨™</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">status</td>
            <td class="py-3 px-4 text-green-400">âœ“</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">accepted / declined / tentative</td>
          </tr>
          <tr class="border-b border-[var(--border-default)]">
            <td class="py-3 px-4 font-mono text-purple-400">fb</td>
            <td class="py-3 px-4 text-gray-400">-</td>
            <td class="py-3 px-4 text-[var(--text-secondary)]">free / busyï¼ˆé¡¯ç¤ºå¿™ç¢Œç‹€æ…‹ï¼‰</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- Examples -->
  <section class="mb-12">
    <h2 class="text-2xl font-bold text-[var(--text-primary)] mb-4">ä½¿ç”¨ç¯„ä¾‹</h2>

    <h3 class="text-lg font-semibold text-[var(--text-primary)] mb-3">å…¨å¤©æ´»å‹•ï¼ˆæ—¥æœŸï¼‰</h3>
    <pre class="p-4 rounded-lg bg-[var(--bg-darkest)] overflow-x-auto mb-6"><code class="text-sm text-gray-300">{`{
  "kind": 31922,
  "tags": [
    ["d", "christmas-2024"],
    ["title", "è–èª•ç¯€"],
    ["start", "2024-12-25"],
    ["image", "https://example.com/christmas.jpg"]
  ],
  "content": "è–èª•ç¯€å¿«æ¨‚ï¼ğŸ„"
}`}</code></pre>

    <h3 class="text-lg font-semibold text-[var(--text-primary)] mb-3">å¤šæ—¥æ´»å‹•</h3>
    <pre class="p-4 rounded-lg bg-[var(--bg-darkest)] overflow-x-auto mb-6"><code class="text-sm text-gray-300">{`{
  "kind": 31922,
  "tags": [
    ["d", "bitcoin-conf-2024"],
    ["title", "Bitcoin 2024 å¤§æœƒ"],
    ["start", "2024-07-25"],
    ["end", "2024-07-27"],
    ["location", "Nashville, Tennessee"],
    ["g", "dnmw7"],
    ["image", "https://example.com/btc-conf.jpg"],
    ["t", "bitcoin"],
    ["t", "conference"]
  ],
  "content": "å¹´åº¦æ¯”ç‰¹å¹£ç››æœƒï¼ŒåŒ¯èšå…¨çƒé–‹ç™¼è€…èˆ‡æ„›å¥½è€…"
}`}</code></pre>

    <h3 class="text-lg font-semibold text-[var(--text-primary)] mb-3">æŒ‡å®šæ™‚é–“æ´»å‹•</h3>
    <pre class="p-4 rounded-lg bg-[var(--bg-darkest)] overflow-x-auto mb-6"><code class="text-sm text-gray-300">{`{
  "kind": 31923,
  "tags": [
    ["d", "nostr-meetup-taipei"],
    ["title", "Nostr é–‹ç™¼è€…èšæœƒ - å°åŒ—"],
    ["start", "1704042000"],
    ["end", "1704049200"],
    ["start_tzid", "Asia/Taipei"],
    ["end_tzid", "Asia/Taipei"],
    ["location", "å°åŒ—å¸‚ä¿¡ç¾©å€æŸå’–å•¡å»³"],
    ["g", "wsqqk"],
    ["summary", "æ¯æœˆä¸€æ¬¡çš„ Nostr é–‹ç™¼è€…äº¤æµèšæœƒ"],
    ["r", "https://meet.example.com/nostr-taipei"],
    ["p", "<organizer-pubkey>", "wss://relay.example.com", "organizer"],
    ["p", "<speaker-pubkey>", "", "speaker"],
    ["t", "nostr"],
    ["t", "meetup"]
  ],
  "content": "æœ¬æœˆä¸»é¡Œï¼šNIP-52 æ—¥æ›†æ´»å‹•å¯¦ä½œåˆ†äº«"
}`}</code></pre>

    <h3 class="text-lg font-semibold text-[var(--text-primary)] mb-3">RSVP å›è¦†</h3>
    <pre class="p-4 rounded-lg bg-[var(--bg-darkest)] overflow-x-auto mb-6"><code class="text-sm text-gray-300">{`{
  "kind": 31925,
  "tags": [
    ["a", "31923:<organizer-pubkey>:nostr-meetup-taipei"],
    ["d", "31923:<organizer-pubkey>:nostr-meetup-taipei"],
    ["status", "accepted"],
    ["fb", "busy"]
  ],
  "content": "æœŸå¾…åƒåŠ ï¼æˆ‘æœƒå¸¶ä¸€äº› Nostr è²¼ç´™ ğŸ‰"
}`}</code></pre>

    <h3 class="text-lg font-semibold text-[var(--text-primary)] mb-3">æ—¥æ›†åˆ—è¡¨</h3>
    <pre class="p-4 rounded-lg bg-[var(--bg-darkest)] overflow-x-auto mb-6"><code class="text-sm text-gray-300">{`{
  "kind": 31924,
  "tags": [
    ["d", "my-tech-calendar"],
    ["title", "ç§‘æŠ€æ´»å‹•æ—¥æ›†"],
    ["a", "31923:<pubkey1>:nostr-meetup-taipei"],
    ["a", "31922:<pubkey2>:bitcoin-conf-2024"],
    ["a", "31923:<pubkey3>:eth-hackathon"]
  ],
  "content": "æ”¶é›†å„ç¨®ç§‘æŠ€å’Œå€å¡Šéˆç›¸é—œæ´»å‹•"
}`}</code></pre>
  </section>

  <!-- TypeScript Implementation -->
  <section class="mb-12">
    <h2 class="text-2xl font-bold text-[var(--text-primary)] mb-4">TypeScript å¯¦ä½œ</h2>
    <pre class="p-4 rounded-lg bg-[var(--bg-darkest)] overflow-x-auto mb-4"><code class="text-sm text-gray-300">{`import { finalizeEvent, generateSecretKey, getPublicKey } from 'nostr-tools'

type RSVPStatus = 'accepted' | 'declined' | 'tentative'
type FreeBusy = 'free' | 'busy'

interface Participant {
  pubkey: string
  relay?: string
  role?: string
}

interface DateEventOptions {
  id: string
  title: string
  startDate: string  // YYYY-MM-DD
  endDate?: string
  summary?: string
  image?: string
  location?: string
  geohash?: string
  participants?: Participant[]
  hashtags?: string[]
  links?: string[]
  content?: string
}

interface TimeEventOptions {
  id: string
  title: string
  startTime: number  // Unix timestamp
  endTime?: number
  startTimezone?: string  // IANA timezone
  endTimezone?: string
  summary?: string
  image?: string
  location?: string
  geohash?: string
  participants?: Participant[]
  hashtags?: string[]
  links?: string[]
  content?: string
}

// å‰µå»ºæ—¥æœŸæ´»å‹•
function createDateEvent(
  options: DateEventOptions,
  secretKey: Uint8Array
): object {
  const tags: string[][] = [
    ['d', options.id],
    ['title', options.title],
    ['start', options.startDate],
  ]

  if (options.endDate) {
    tags.push(['end', options.endDate])
  }

  addCommonTags(tags, options)

  const event = {
    kind: 31922,
    created_at: Math.floor(Date.now() / 1000),
    tags,
    content: options.content || '',
  }

  return finalizeEvent(event, secretKey)
}

// å‰µå»ºæ™‚é–“æ´»å‹•
function createTimeEvent(
  options: TimeEventOptions,
  secretKey: Uint8Array
): object {
  const tags: string[][] = [
    ['d', options.id],
    ['title', options.title],
    ['start', options.startTime.toString()],
  ]

  if (options.endTime) {
    tags.push(['end', options.endTime.toString()])
  }

  if (options.startTimezone) {
    tags.push(['start_tzid', options.startTimezone])
  }

  if (options.endTimezone) {
    tags.push(['end_tzid', options.endTimezone])
  }

  addCommonTags(tags, options)

  const event = {
    kind: 31923,
    created_at: Math.floor(Date.now() / 1000),
    tags,
    content: options.content || '',
  }

  return finalizeEvent(event, secretKey)
}

// æ·»åŠ é€šç”¨æ¨™ç±¤
function addCommonTags(
  tags: string[][],
  options: Partial<DateEventOptions & TimeEventOptions>
) {
  if (options.summary) {
    tags.push(['summary', options.summary])
  }
  if (options.image) {
    tags.push(['image', options.image])
  }
  if (options.location) {
    tags.push(['location', options.location])
  }
  if (options.geohash) {
    tags.push(['g', options.geohash])
  }
  if (options.participants) {
    for (const p of options.participants) {
      const pTag = ['p', p.pubkey]
      if (p.relay) pTag.push(p.relay)
      else if (p.role) pTag.push('')
      if (p.role) pTag.push(p.role)
      tags.push(pTag)
    }
  }
  if (options.hashtags) {
    for (const tag of options.hashtags) {
      tags.push(['t', tag])
    }
  }
  if (options.links) {
    for (const link of options.links) {
      tags.push(['r', link])
    }
  }
}

// å‰µå»º RSVP
function createRSVP(
  eventKind: 31922 | 31923,
  eventPubkey: string,
  eventId: string,
  status: RSVPStatus,
  secretKey: Uint8Array,
  options?: { freeBusy?: FreeBusy; comment?: string }
): object {
  const aTag = \`\${eventKind}:\${eventPubkey}:\${eventId}\`

  const tags: string[][] = [
    ['a', aTag],
    ['d', aTag],
    ['status', status],
  ]

  if (options?.freeBusy) {
    tags.push(['fb', options.freeBusy])
  }

  const event = {
    kind: 31925,
    created_at: Math.floor(Date.now() / 1000),
    tags,
    content: options?.comment || '',
  }

  return finalizeEvent(event, secretKey)
}

// å‰µå»ºæ—¥æ›†åˆ—è¡¨
function createCalendar(
  id: string,
  title: string,
  eventRefs: { kind: 31922 | 31923; pubkey: string; id: string }[],
  secretKey: Uint8Array
): object {
  const tags: string[][] = [
    ['d', id],
    ['title', title],
  ]

  for (const ref of eventRefs) {
    tags.push(['a', \`\${ref.kind}:\${ref.pubkey}:\${ref.id}\`])
  }

  const event = {
    kind: 31924,
    created_at: Math.floor(Date.now() / 1000),
    tags,
    content: '',
  }

  return finalizeEvent(event, secretKey)
}

// ä½¿ç”¨ç¯„ä¾‹
const sk = generateSecretKey()
const pk = getPublicKey(sk)

// å‰µå»ºå…¨å¤©æ´»å‹•
const dateEvent = createDateEvent({
  id: 'bitcoin-pizza-day',
  title: 'Bitcoin Pizza Day',
  startDate: '2024-05-22',
  summary: 'ç´€å¿µç¬¬ä¸€ç­†æ¯”ç‰¹å¹£å¯¦é«”äº¤æ˜“',
  hashtags: ['bitcoin', 'pizzaday'],
}, sk)

// å‰µå»ºæŒ‡å®šæ™‚é–“æ´»å‹•
const timeEvent = createTimeEvent({
  id: 'nostr-workshop',
  title: 'Nostr é–‹ç™¼å·¥ä½œåŠ',
  startTime: Math.floor(Date.now() / 1000) + 86400 * 7,
  endTime: Math.floor(Date.now() / 1000) + 86400 * 7 + 7200,
  startTimezone: 'Asia/Taipei',
  endTimezone: 'Asia/Taipei',
  location: 'ç·šä¸Š',
  links: ['https://meet.example.com/workshop'],
  participants: [
    { pubkey: pk, role: 'organizer' },
  ],
  content: 'å­¸ç¿’å¦‚ä½•é–‹ç™¼ Nostr å®¢æˆ¶ç«¯',
}, sk)

// RSVP ç¢ºèªåƒåŠ 
const rsvp = createRSVP(
  31923,
  pk,
  'nostr-workshop',
  'accepted',
  sk,
  { freeBusy: 'busy', comment: 'æˆ‘æœƒæº–æ™‚åƒåŠ ï¼' }
)

console.log('Date event:', dateEvent)
console.log('Time event:', timeEvent)
console.log('RSVP:', rsvp)`}</code></pre>
  </section>

  <!-- Query Events -->
  <section class="mb-12">
    <h2 class="text-2xl font-bold text-[var(--text-primary)] mb-4">æŸ¥è©¢æ´»å‹•</h2>
    <pre class="p-4 rounded-lg bg-[var(--bg-darkest)] overflow-x-auto mb-4"><code class="text-sm text-gray-300">{`import { SimplePool } from 'nostr-tools'

const pool = new SimplePool()
const relays = ['wss://relay.example.com']

// æŸ¥è©¢ç”¨æˆ¶çš„æ‰€æœ‰æ´»å‹•
async function getUserEvents(pubkey: string) {
  const events = await pool.querySync(relays, {
    kinds: [31922, 31923],
    authors: [pubkey],
  })
  return events
}

// æŸ¥è©¢ç‰¹å®šåœ°å€çš„æ´»å‹•ï¼ˆä½¿ç”¨ geohashï¼‰
async function getEventsByLocation(geohashPrefix: string) {
  const events = await pool.querySync(relays, {
    kinds: [31922, 31923],
    '#g': [geohashPrefix],
  })
  return events
}

// æŸ¥è©¢ç‰¹å®šä¸»é¡Œçš„æ´»å‹•
async function getEventsByTag(tag: string) {
  const events = await pool.querySync(relays, {
    kinds: [31922, 31923],
    '#t': [tag],
  })
  return events
}

// æŸ¥è©¢æ´»å‹•çš„ RSVP
async function getEventRSVPs(eventKind: number, eventPubkey: string, eventId: string) {
  const aTag = \`\${eventKind}:\${eventPubkey}:\${eventId}\`
  const rsvps = await pool.querySync(relays, {
    kinds: [31925],
    '#a': [aTag],
  })
  return rsvps
}

// çµ±è¨ˆ RSVP
function countRSVPs(rsvps: any[]): {
  accepted: number
  declined: number
  tentative: number
  total: number
} {
  const counts = { accepted: 0, declined: 0, tentative: 0, total: rsvps.length }

  for (const rsvp of rsvps) {
    const statusTag = rsvp.tags.find((t: string[]) => t[0] === 'status')
    const status = statusTag?.[1]
    if (status === 'accepted') counts.accepted++
    else if (status === 'declined') counts.declined++
    else if (status === 'tentative') counts.tentative++
  }

  return counts
}

// è§£ææ´»å‹•äº‹ä»¶
function parseCalendarEvent(event: any) {
  const getTag = (name: string) =>
    event.tags.find((t: string[]) => t[0] === name)?.[1]

  const isDateBased = event.kind === 31922

  const participants = event.tags
    .filter((t: string[]) => t[0] === 'p')
    .map((t: string[]) => ({
      pubkey: t[1],
      relay: t[2] || undefined,
      role: t[3] || undefined,
    }))

  const hashtags = event.tags
    .filter((t: string[]) => t[0] === 't')
    .map((t: string[]) => t[1])

  return {
    id: getTag('d'),
    title: getTag('title'),
    start: isDateBased ? getTag('start') : parseInt(getTag('start') || '0'),
    end: isDateBased ? getTag('end') : (getTag('end') ? parseInt(getTag('end')!) : undefined),
    startTimezone: getTag('start_tzid'),
    endTimezone: getTag('end_tzid'),
    summary: getTag('summary'),
    image: getTag('image'),
    location: getTag('location'),
    geohash: getTag('g'),
    participants,
    hashtags,
    content: event.content,
    isDateBased,
    pubkey: event.pubkey,
    createdAt: event.created_at,
  }
}`}</code></pre>
  </section>

  <!-- Use Cases -->
  <section class="mb-12">
    <h2 class="text-2xl font-bold text-[var(--text-primary)] mb-4">æ‡‰ç”¨å ´æ™¯</h2>
    <div class="grid md:grid-cols-2 gap-4">
      <div class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
        <h4 class="font-semibold text-[var(--text-primary)] mb-2">ğŸ“… å€‹äººæ—¥æ›†</h4>
        <p class="text-sm text-[var(--text-secondary)]">
          ç®¡ç†å€‹äººæ´»å‹•ã€ç´„æœƒå’Œæé†’ï¼Œè·¨å®¢æˆ¶ç«¯åŒæ­¥ã€‚
        </p>
      </div>
      <div class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
        <h4 class="font-semibold text-[var(--text-primary)] mb-2">ğŸ‰ ç¤¾ç¾¤èšæœƒ</h4>
        <p class="text-sm text-[var(--text-secondary)]">
          ç™¼å¸ƒ Meetupã€é»‘å®¢æ¾ã€ç ”è¨æœƒç­‰ç¤¾ç¾¤æ´»å‹•ã€‚
        </p>
      </div>
      <div class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
        <h4 class="font-semibold text-[var(--text-primary)] mb-2">ğŸ¢ æœƒè­°æ’ç¨‹</h4>
        <p class="text-sm text-[var(--text-secondary)]">
          åœ˜éšŠæœƒè­°ã€è¦–è¨Šé€šè©±æ’ç¨‹ï¼Œæ•´åˆ RSVP ç¢ºèªã€‚
        </p>
      </div>
      <div class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
        <h4 class="font-semibold text-[var(--text-primary)] mb-2">ğŸµ æ¼”å‡ºæ´»å‹•</h4>
        <p class="text-sm text-[var(--text-secondary)]">
          éŸ³æ¨‚æœƒã€è¡¨æ¼”æ´»å‹•ç™¼å¸ƒï¼Œçµåˆåœ°é»æœå°‹ã€‚
        </p>
      </div>
      <div class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
        <h4 class="font-semibold text-[var(--text-primary)] mb-2">ğŸ“º ç›´æ’­é å‘Š</h4>
        <p class="text-sm text-[var(--text-secondary)]">
          çµåˆ NIP-53ï¼Œé å‘Šç›´æ’­æ´»å‹•æ™‚é–“ã€‚
        </p>
      </div>
      <div class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
        <h4 class="font-semibold text-[var(--text-primary)] mb-2">ğŸ—“ï¸ å…¬å…±æ—¥æ›†</h4>
        <p class="text-sm text-[var(--text-secondary)]">
          å‰µå»ºä¸»é¡Œæ—¥æ›†ï¼ˆå¦‚å€å¡Šéˆæ´»å‹•ï¼‰ï¼Œè®“å…¶ä»–äººè¨‚é–±ã€‚
        </p>
      </div>
    </div>
  </section>

  <!-- Best Practices -->
  <section class="mb-12">
    <h2 class="text-2xl font-bold text-[var(--text-primary)] mb-4">æœ€ä½³å¯¦è¸</h2>
    <div class="space-y-4">
      <div class="p-4 rounded-lg bg-green-500/10 border border-green-500/20">
        <h4 class="font-semibold text-green-400 mb-2">âœ“ ä½¿ç”¨æ­£ç¢ºçš„æ´»å‹•é¡å‹</h4>
        <p class="text-sm text-[var(--text-secondary)]">
          å…¨å¤©æ´»å‹•ä½¿ç”¨ kind 31922ï¼ˆæ—¥æœŸï¼‰ï¼Œæœ‰å…·é«”æ™‚é–“çš„æ´»å‹•ä½¿ç”¨ kind 31923ï¼ˆæ™‚é–“ï¼‰ã€‚
        </p>
      </div>
      <div class="p-4 rounded-lg bg-green-500/10 border border-green-500/20">
        <h4 class="font-semibold text-green-400 mb-2">âœ“ åŒ…å«æ™‚å€è³‡è¨Š</h4>
        <p class="text-sm text-[var(--text-secondary)]">
          æ™‚é–“æ´»å‹•æ‡‰åŒ…å« start_tzid æ¨™ç±¤ï¼Œå¹«åŠ©ä¸åŒæ™‚å€çš„ç”¨æˆ¶æ­£ç¢ºé¡¯ç¤ºæ™‚é–“ã€‚
        </p>
      </div>
      <div class="p-4 rounded-lg bg-green-500/10 border border-green-500/20">
        <h4 class="font-semibold text-green-400 mb-2">âœ“ æ·»åŠ  geohash æ–¹ä¾¿æœå°‹</h4>
        <p class="text-sm text-[var(--text-secondary)]">
          å¯¦é«”æ´»å‹•æ‡‰åŒ…å« g æ¨™ç±¤ï¼ˆgeohashï¼‰ï¼Œè®“ç”¨æˆ¶å¯ä»¥æœå°‹é™„è¿‘çš„æ´»å‹•ã€‚
        </p>
      </div>
      <div class="p-4 rounded-lg bg-yellow-500/10 border border-yellow-500/20">
        <h4 class="font-semibold text-yellow-400 mb-2">âš  ä¸æ”¯æ´é‡è¤‡æ´»å‹•</h4>
        <p class="text-sm text-[var(--text-secondary)]">
          NIP-52 ç›®å‰ä¸æ”¯æ´é‡è¤‡æ´»å‹•ï¼ˆå¦‚æ¯é€±æœƒè­°ï¼‰ï¼Œéœ€è¦ç‚ºæ¯æ¬¡æ´»å‹•å‰µå»ºç¨ç«‹äº‹ä»¶ã€‚
        </p>
      </div>
      <div class="p-4 rounded-lg bg-yellow-500/10 border border-yellow-500/20">
        <h4 class="font-semibold text-yellow-400 mb-2">âš  RSVP çš„ d æ¨™ç±¤</h4>
        <p class="text-sm text-[var(--text-secondary)]">
          RSVP äº‹ä»¶çš„ d æ¨™ç±¤æ‡‰èˆ‡ a æ¨™ç±¤ç›¸åŒï¼Œç¢ºä¿æ¯å€‹ç”¨æˆ¶å°åŒä¸€æ´»å‹•åªæœ‰ä¸€å€‹ RSVPã€‚
        </p>
      </div>
    </div>
  </section>

  <!-- Related NIPs -->
  <section class="mb-12">
    <h2 class="text-2xl font-bold text-[var(--text-primary)] mb-4">ç›¸é—œ NIP</h2>
    <div class="grid md:grid-cols-2 gap-4">
      <a
        href="/tech/nostr/nip-53"
        class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)] hover:border-purple-500/50 transition-colors"
      >
        <h4 class="font-semibold text-[var(--text-primary)] mb-1">NIP-53 ç›´æ’­æ´»å‹•</h4>
        <p class="text-sm text-[var(--text-secondary)]">å³æ™‚ç›´æ’­èˆ‡äº’å‹•</p>
      </a>
      <a
        href="/tech/nostr/nip-38"
        class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)] hover:border-purple-500/50 transition-colors"
      >
        <h4 class="font-semibold text-[var(--text-primary)] mb-1">NIP-38 ç”¨æˆ¶ç‹€æ…‹</h4>
        <p class="text-sm text-[var(--text-secondary)]">é¡¯ç¤ºç”¨æˆ¶æ­£åœ¨åƒåŠ çš„æ´»å‹•</p>
      </a>
      <a
        href="/tech/nostr/nip-51"
        class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)] hover:border-purple-500/50 transition-colors"
      >
        <h4 class="font-semibold text-[var(--text-primary)] mb-1">NIP-51 åˆ—è¡¨</h4>
        <p class="text-sm text-[var(--text-secondary)]">æ—¥æ›†åˆ—è¡¨çš„åŸºç¤</p>
      </a>
      <a
        href="/tech/nostr/nip-01"
        class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)] hover:border-purple-500/50 transition-colors"
      >
        <h4 class="font-semibold text-[var(--text-primary)] mb-1">NIP-01 åŸºæœ¬å”è­°</h4>
        <p class="text-sm text-[var(--text-secondary)]">å¯å®šå€äº‹ä»¶çš„åŸºç¤</p>
      </a>
    </div>
  </section>

  <!-- Summary -->
  <section class="mb-12">
    <h2 class="text-2xl font-bold text-[var(--text-primary)] mb-4">ç¸½çµ</h2>
    <div class="p-6 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
      <p class="text-[var(--text-secondary)] mb-4">
        NIP-52 ç‚º Nostr æä¾›äº†å®Œæ•´çš„æ—¥æ›†æ´»å‹•ç³»çµ±ï¼Œæ”¯æ´å…¨å¤©æ´»å‹•ã€æŒ‡å®šæ™‚é–“æ´»å‹•ã€RSVP å›è¦†å’Œæ—¥æ›†åˆ—è¡¨ã€‚
        é€é geohash å’Œä¸»é¡Œæ¨™ç±¤ï¼Œç”¨æˆ¶å¯ä»¥è¼•é¬†ç™¼ç¾å’Œåƒèˆ‡æ„Ÿèˆˆè¶£çš„æ´»å‹•ã€‚
      </p>
      <div class="grid md:grid-cols-4 gap-4 text-center">
        <div class="p-3 rounded-lg bg-[var(--bg-primary)]">
          <div class="text-2xl font-bold text-purple-400">31922</div>
          <div class="text-sm text-[var(--text-secondary)]">æ—¥æœŸæ´»å‹•</div>
        </div>
        <div class="p-3 rounded-lg bg-[var(--bg-primary)]">
          <div class="text-2xl font-bold text-blue-400">31923</div>
          <div class="text-sm text-[var(--text-secondary)]">æ™‚é–“æ´»å‹•</div>
        </div>
        <div class="p-3 rounded-lg bg-[var(--bg-primary)]">
          <div class="text-2xl font-bold text-green-400">31925</div>
          <div class="text-sm text-[var(--text-secondary)]">RSVP</div>
        </div>
        <div class="p-3 rounded-lg bg-[var(--bg-primary)]">
          <div class="text-2xl font-bold text-orange-400">31924</div>
          <div class="text-sm text-[var(--text-secondary)]">æ—¥æ›†åˆ—è¡¨</div>
        </div>
      </div>
    </div>
  </section>
</ArticleLayout>
