---
import PageLayout from '@/layouts/PageLayout.astro';
import Breadcrumb from '@/components/ui/Breadcrumb.astro';
import Button from '@/components/ui/Button.astro';
---

<PageLayout
  title="比特幣如何運作"
  description="探索比特幣網路的運作機制，包括交易、區塊和共識。"
>
  <article class="py-16 md:py-24">
    <div class="container-wide">
      <div class="max-w-3xl mx-auto">
        <!-- Breadcrumb -->
        <Breadcrumb items={[
          { label: '學習', href: '/learn/' },
          { label: '入門基礎', href: '/learn/basics/' },
          { label: '比特幣如何運作' },
        ]} />

        <!-- Header -->
        <header class="mb-12">
          <div class="flex items-center gap-3 mb-4">
            <span class="px-3 py-1 rounded-full text-sm font-medium bg-green-500/10 text-green-600 dark:text-green-400">
              入門
            </span>
            <span class="text-sm text-[var(--text-tertiary)]">閱讀時間：15 分鐘</span>
          </div>
          <h1 class="text-4xl md:text-5xl font-bold text-[var(--text-primary)] mb-6">
            比特幣如何運作？
          </h1>
          <p class="text-xl text-[var(--text-secondary)]">
            比特幣網路是一個精密的分散式系統。讓我們了解交易如何被創建、
            驗證和永久記錄在區塊鏈上。
          </p>
        </header>

        <!-- Content -->
        <div class="prose prose-lg prose-zh dark:prose-invert max-w-none">
          <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-12 mb-4">交易流程概述</h2>
          <p class="text-[var(--text-secondary)] leading-relaxed mb-6">
            當你發送比特幣時，實際上是在創建一條數位訊息，宣布某些比特幣的所有權轉移。
            這個過程涉及多個步驟：
          </p>

          <div class="space-y-4 mb-8">
            <div class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
              <div class="flex items-center gap-3">
                <span class="w-8 h-8 rounded-full bg-bitcoin-500 text-white flex items-center justify-center font-bold text-sm">1</span>
                <div>
                  <h4 class="font-semibold text-[var(--text-primary)]">創建交易</h4>
                  <p class="text-sm text-[var(--text-secondary)]">錢包軟體創建一筆交易，指定接收地址和金額</p>
                </div>
              </div>
            </div>
            <div class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
              <div class="flex items-center gap-3">
                <span class="w-8 h-8 rounded-full bg-bitcoin-500 text-white flex items-center justify-center font-bold text-sm">2</span>
                <div>
                  <h4 class="font-semibold text-[var(--text-primary)]">數位簽名</h4>
                  <p class="text-sm text-[var(--text-secondary)]">使用私鑰對交易進行簽名，證明你是資金的所有者</p>
                </div>
              </div>
            </div>
            <div class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
              <div class="flex items-center gap-3">
                <span class="w-8 h-8 rounded-full bg-bitcoin-500 text-white flex items-center justify-center font-bold text-sm">3</span>
                <div>
                  <h4 class="font-semibold text-[var(--text-primary)]">廣播到網路</h4>
                  <p class="text-sm text-[var(--text-secondary)]">交易被廣播到比特幣網路中的節點</p>
                </div>
              </div>
            </div>
            <div class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
              <div class="flex items-center gap-3">
                <span class="w-8 h-8 rounded-full bg-bitcoin-500 text-white flex items-center justify-center font-bold text-sm">4</span>
                <div>
                  <h4 class="font-semibold text-[var(--text-primary)]">驗證和打包</h4>
                  <p class="text-sm text-[var(--text-secondary)]">礦工驗證交易有效性，並將其打包進區塊</p>
                </div>
              </div>
            </div>
            <div class="p-4 rounded-lg bg-[var(--bg-secondary)] border border-[var(--border-default)]">
              <div class="flex items-center gap-3">
                <span class="w-8 h-8 rounded-full bg-bitcoin-500 text-white flex items-center justify-center font-bold text-sm">5</span>
                <div>
                  <h4 class="font-semibold text-[var(--text-primary)]">確認</h4>
                  <p class="text-sm text-[var(--text-secondary)]">區塊被添加到區塊鏈，交易獲得確認</p>
                </div>
              </div>
            </div>
          </div>

          <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-12 mb-4">區塊鏈：永久的記錄</h2>
          <p class="text-[var(--text-secondary)] leading-relaxed mb-6">
            區塊鏈是比特幣所有交易的公開帳本。它由一系列「區塊」組成，
            每個區塊包含一批交易記錄，並通過密碼學方式連接到前一個區塊。
          </p>
          <p class="text-[var(--text-secondary)] leading-relaxed mb-6">
            每個區塊包含：
          </p>
          <ul class="space-y-2 text-[var(--text-secondary)] mb-6">
            <li class="flex items-start gap-2">
              <span class="text-bitcoin-500">•</span>
              <span><strong>區塊頭</strong>：包含前一個區塊的雜湊值、時間戳和其他元數據</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-bitcoin-500">•</span>
              <span><strong>交易列表</strong>：該區塊中包含的所有交易</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-bitcoin-500">•</span>
              <span><strong>工作量證明</strong>：礦工找到的符合難度要求的隨機數</span>
            </li>
          </ul>

          <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-12 mb-4">挖礦與共識</h2>
          <p class="text-[var(--text-secondary)] leading-relaxed mb-6">
            「挖礦」是比特幣網路達成共識的方式。礦工們競爭解決一個計算難題，
            第一個找到解答的礦工獲得創建新區塊的權利，並獲得區塊獎勵和交易手續費。
          </p>
          <p class="text-[var(--text-secondary)] leading-relaxed mb-6">
            這種機制稱為「工作量證明」（Proof of Work），它確保：
          </p>
          <ul class="space-y-2 text-[var(--text-secondary)] mb-6">
            <li class="flex items-start gap-2">
              <span class="text-bitcoin-500">•</span>
              <span>新區塊的產生需要消耗真實的計算資源</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-bitcoin-500">•</span>
              <span>篡改歷史交易的成本極高（需要重做所有後續的工作）</span>
            </li>
            <li class="flex items-start gap-2">
              <span class="text-bitcoin-500">•</span>
              <span>網路中的節點可以輕鬆驗證區塊的有效性</span>
            </li>
          </ul>

          <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-12 mb-4">網路節點</h2>
          <p class="text-[var(--text-secondary)] leading-relaxed mb-6">
            比特幣網路由數千個節點組成。全節點保存完整的區塊鏈副本，
            並獨立驗證每一筆交易和每一個區塊。這種分散式架構確保了網路的安全性和抗審查性。
          </p>

          <h2 class="text-2xl font-bold text-[var(--text-primary)] mt-12 mb-4">下一步</h2>
          <p class="text-[var(--text-secondary)] leading-relaxed mb-6">
            現在你已經了解了比特幣的基本運作原理。接下來，讓我們學習如何安全地儲存和管理比特幣。
          </p>
        </div>

        <!-- Navigation -->
        <div class="mt-12 pt-8 border-t border-[var(--border-default)] flex justify-between">
          <Button href="/learn/basics/what-is-bitcoin" variant="ghost">
            <svg class="h-4 w-4 mr-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M15 19l-7-7 7-7" />
            </svg>
            上一篇：什麼是比特幣
          </Button>
          <Button href="/learn/basics/wallet-guide" variant="primary">
            下一篇：錢包使用指南
            <svg class="h-4 w-4 ml-1" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M9 5l7 7-7 7" />
            </svg>
          </Button>
        </div>
      </div>
    </div>
  </article>
</PageLayout>
